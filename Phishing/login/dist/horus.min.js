var chatUI=function(n){var o={};function s(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}return s.m=n,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s="./src/components/chat_UI/chat.UI.ts")}({"./src/components/chat_UI/chat.UI.ts":function(module,exports,__webpack_require__){"use strict";eval('/**\n * Módulo chat Templates\n */\n\nvar chat_alert_tpl_html_1 = __webpack_require__(/*! ./templates/chat_alert.tpl.html */ "./src/components/chat_UI/templates/chat_alert.tpl.html");\nvar chat_confirm_tpl_html_1 = __webpack_require__(/*! ./templates/chat_confirm.tpl.html */ "./src/components/chat_UI/templates/chat_confirm.tpl.html");\nvar chat_invite_tpl_html_1 = __webpack_require__(/*! ./templates/chat_invite.tpl.html */ "./src/components/chat_UI/templates/chat_invite.tpl.html");\nvar chat_request_tpl_html_1 = __webpack_require__(/*! ./templates/chat_request.tpl.html */ "./src/components/chat_UI/templates/chat_request.tpl.html");\nvar chat_chatBox_tpl_html_1 = __webpack_require__(/*! ./templates/chat_chatBox.tpl.html */ "./src/components/chat_UI/templates/chat_chatBox.tpl.html");\nvar chat_msgVis_tpl_html_1 = __webpack_require__(/*! ./templates/chat_msgVis.tpl.html */ "./src/components/chat_UI/templates/chat_msgVis.tpl.html");\nvar chat_msgOp_tpl_html_1 = __webpack_require__(/*! ./templates/chat_msgOp.tpl.html */ "./src/components/chat_UI/templates/chat_msgOp.tpl.html");\nvar chat_msgOpFile_tpl_html_1 = __webpack_require__(/*! ./templates/chat_msgOpFile.tpl.html */ "./src/components/chat_UI/templates/chat_msgOpFile.tpl.html");\nvar chat_msgVisFile_tpl_html_1 = __webpack_require__(/*! ./templates/chat_msgVisFile.tpl.html */ "./src/components/chat_UI/templates/chat_msgVisFile.tpl.html");\nvar chat_msgSrv_tpl_html_1 = __webpack_require__(/*! ./templates/chat_msgSrv.tpl.html */ "./src/components/chat_UI/templates/chat_msgSrv.tpl.html");\nvar chat_transferConfirm_tpl_html_1 = __webpack_require__(/*! ./templates/chat_transferConfirm.tpl.html */ "./src/components/chat_UI/templates/chat_transferConfirm.tpl.html");\nvar sanitizeHtml_1 = __webpack_require__(/*! ./sanitizeHtml */ "./src/components/chat_UI/sanitizeHtml.ts");\nvar ChatUI = /** @class */ (function () {\n    function ChatUI(props) {\n        this.props = props;\n    }\n    //convite chat ativo, op => cliente\n    ChatUI.prototype.chatInvite = function (appendIn, response) {\n        var html = chat_invite_tpl_html_1.default\n            .replace(/{{assets}}/g, this.props.assets)\n            .replace(/{{title}}/g, response.title)\n            .replace(/{{text}}/g, response.text);\n        if (!appendIn)\n            return html;\n        document.querySelector(appendIn).insertAdjacentHTML(\'beforeend\', html);\n        document.querySelector("#chatRequestNo").addEventListener("click", response.chatRefuse);\n        document.querySelector("#chatRequestYes").addEventListener("click", response.chatAccept);\n        document.querySelector("#chatRequestWaiting").addEventListener("click", response.chatRefuse);\n    };\n    //convite chat reativo, cliente => op\n    ChatUI.prototype.chatRequest = function (appendIn, response) {\n        var html = chat_request_tpl_html_1.default\n            .replace(/{{assets}}/g, this.props.assets)\n            .replace(/{{title}}/g, response.title)\n            .replace(/{{text}}/g, response.text);\n        if (!appendIn)\n            return html;\n        if (document.getElementById("horus-askChat"))\n            document.getElementById("horus-askChat").outerHTML = "";\n        document.querySelector(appendIn).insertAdjacentHTML(\'beforeend\', html);\n        var btn_accept = document.querySelector("#horus-askChat .hcr-btn_accept");\n        var btn_ask = document.querySelector("#horus-askChat .hac-ask");\n        var ask_box = document.querySelector("#horus-askChat .hac-box");\n        var requesting = false;\n        var self = this;\n        btn_accept.addEventListener("click", function () {\n            if (requesting) {\n                btn_accept.innerHTML = "INICIAR CHAT";\n                requesting = false;\n            }\n            else {\n                btn_accept.innerHTML = "<img src=\\"" + self.props.assets + "/images/wait.gif\\" class=\\"hca-waiting\\">\\n                <span>Solicita\\u00E7\\u00E3o em andamento</span><br>\\n                <span class=\\"cancel\\">&raquo; clique para cancelar</span>";\n                requesting = true;\n            }\n            response.action();\n        });\n        btn_ask.addEventListener("click", function () {\n            ask_box.classList.remove(\'hac-box-hide\');\n            ask_box.classList.add(\'hac-box-show\');\n        });\n        ask_box.addEventListener("mouseleave", function () {\n            setTimeout(function () {\n                ask_box.classList.remove(\'hac-box-show\');\n                ask_box.classList.add(\'hac-box-hide\');\n            }, 1000);\n        });\n    };\n    //caixa de chat\n    ChatUI.prototype.chatBox = function (appendIn, protocol, actions) {\n        this.chatRequestClose();\n        this.chatBoxClose();\n        var html = chat_chatBox_tpl_html_1.default\n            .replace("{{protocol}}", protocol)\n            .replace(/{{assets}}/g, this.props.assets);\n        if (!appendIn)\n            return html;\n        document.querySelector(appendIn).insertAdjacentHTML(\'beforeend\', html);\n        document.querySelector(\'#horus-chatBox .hcb-close\').addEventListener(\'click\', actions.chatClose);\n        document.querySelector(\'#horus-chatBox .btnSend\').addEventListener(\'click\', actions.chatMessage);\n        document.querySelector(\'#horus-chatBox .btn-upload\').addEventListener(\'click\', function () {\n            var input = document.getElementById(\'input-file-upload\');\n            input.click();\n            input.addEventListener(\'change\', function cb(event) {\n                function read(file) {\n                    var reader = new FileReader();\n                    reader.addEventListener("load", function (onLoadEvent) {\n                        actions.selectFile({\n                            name: file.name,\n                            mimeType: file.type,\n                            content: onLoadEvent.target.result,\n                            size: file.size\n                        });\n                    }, false);\n                    reader.readAsDataURL(file);\n                }\n                if (input.files[0]) {\n                    read(input.files[0]);\n                }\n                event.currentTarget.removeEventListener(event.type, cb);\n            });\n        });\n        document.querySelector(\'#horus-chatBox #msgOut\').addEventListener(\'keypress\', function (e) {\n            var key = e.which || e.keyCode;\n            if (key === 13) {\n                actions.chatMessage();\n                e.preventDefault();\n            }\n        });\n        _emojiCtrl();\n        _timeInChat();\n        _moveChatBox();\n        _minimizeChatBox();\n        _expandTextArea();\n        _countChatChars();\n    };\n    //retorna se o usuário está digitando ou não\n    ChatUI.prototype.getStatusTyping = function (cb, time) {\n        if (time === void 0) { time = 500; }\n        var notTypingTime, isTyping;\n        document.querySelector(\'#horus-chatBox #msgOut\').addEventListener(\'keypress\', function (e) {\n            if (!isTyping)\n                cb(true);\n            isTyping = true;\n            if (notTypingTime)\n                clearTimeout(notTypingTime);\n            notTypingTime = setTimeout(function () {\n                cb(false);\n                isTyping = false;\n            }, time);\n        });\n    };\n    //exibe mensagem de digitando do operador\n    ChatUI.prototype.showOperatorIsTyping = function (show) {\n        var typing = document.querySelector("#horus-chatBox .typing");\n        typing.style.visibility = show ? "visible" : "hidden";\n    };\n    //exibir opção de upload de arquivo\n    ChatUI.prototype.showUploadFileIcon = function () {\n        var icon = document.querySelector("#horus-chatBox .btn-upload");\n        icon.style.display = "inline-block";\n    };\n    //recupera a mensagem digitada para envio\n    ChatUI.prototype.chatGetMessage = function () {\n        var textarea = document.querySelector("#msgOut");\n        var msg = _clearText(textarea.value);\n        textarea.value = "";\n        return msg;\n    };\n    //mensagem de chat\n    ChatUI.prototype.chatMessage = function (message) {\n        var chatMsg;\n        switch (message.agent) {\n            case "vis":\n                chatMsg = chat_msgVis_tpl_html_1.default;\n                break;\n            case "op":\n                chatMsg = chat_msgOp_tpl_html_1.default;\n                break;\n            default:\n                chatMsg = chat_msgSrv_tpl_html_1.default;\n                break;\n        }\n        var time = (message.timestamp) ? _moment(message.timestamp) : _moment(new Date().getTime());\n        var msg = _clearText(message.msgTxt);\n        msg = msg.replace(/\\\\n/g, "<br>").replace(/\\n/g, "<br>");\n        chatMsg = chatMsg\n            .replace("{{msgID}}", message.msgID)\n            .replace("{{msgTxt}}", msg)\n            .replace("{{time}}", time);\n        if (message.agent === "op") {\n            var name_1 = "Operador";\n            if (message.agentName) {\n                name_1 = message.agentName.split(" ")[0].toLowerCase();\n                name_1 = name_1.replace(/\\b\\w/g, function (l) { return l.toUpperCase(); });\n            }\n            chatMsg = chatMsg.replace("{{opName}}", name_1);\n        }\n        document.querySelector("#chatTxt").insertAdjacentHTML(\'beforeend\', chatMsg);\n        document.querySelector("#chatTxt").scrollTop = document.querySelector("#chatTxt").scrollHeight;\n    };\n    //adicionar arquivo pra download\n    ChatUI.prototype.chatFile = function (message, type) {\n        var id = document.querySelector("#file_" + message.msgID);\n        if (id)\n            return;\n        var time = (message.senderTimestamp) ? _moment(message.senderTimestamp) : _moment(new Date().getTime());\n        var html = type === "vis" ? chat_msgVisFile_tpl_html_1.default : chat_msgOpFile_tpl_html_1.default;\n        var chatMsg = html\n            .replace("{{fileName}}", message.fileName)\n            .replace("{{fileID}}", message.msgID)\n            .replace("{{msgTxt}}", message.msgTxt)\n            .replace("{{time}}", time);\n        document.querySelector("#chatTxt").insertAdjacentHTML(\'beforeend\', chatMsg);\n        document.querySelector("#chatTxt").scrollTop = document.querySelector("#chatTxt").scrollHeight;\n        var progress = document.querySelector("#file_" + message.msgID + " .progress");\n        if (type === "vis") {\n            progress.style.visibility = "visible";\n        }\n        document.querySelector("#file_" + message.msgID + " .icon-action").addEventListener("click", function () {\n            progress.style.visibility = "visible";\n            message.action();\n        });\n    };\n    //atualiza barra de progresso\n    ChatUI.prototype.chatFileProgress = function (data) {\n        var msg = document.querySelector("#file_" + data.msgID + " .downloaded");\n        if (msg) {\n            msg.style.width = data.percent;\n        }\n    };\n    //exibe upload cancelado\n    ChatUI.prototype.chatFileUploadInfo = function (fileID, info) {\n        var el = document.querySelector("#file_" + fileID + " .icon-action");\n        if (el) {\n            el.outerHTML = "<div>&nbsp;" + info + "</div>";\n        }\n    };\n    //altera o status de uma mensagem\n    ChatUI.prototype.setStatusMessage = function (msgID, status) {\n        var checkClass;\n        switch (status) {\n            case 1:\n                checkClass = \'Checkmark-Check\';\n                break;\n            case 2:\n                checkClass = \'Double-Tick-Black\';\n                break;\n            case 3:\n                checkClass = \'Double-Tick-Green\';\n                break;\n        }\n        document.querySelector("#" + msgID + " li").outerHTML = "";\n        document.querySelector("#" + msgID).insertAdjacentHTML(\'beforeend\', \'<li class="checks \' + checkClass + \'"></li>\');\n    };\n    //confirmar ou não transferência (cliente)\n    ChatUI.prototype.chatBoxConfirmTransfer = function (msg, actions) {\n        var html = chat_transferConfirm_tpl_html_1.default.replace("{{msg}}", msg);\n        document.querySelector("#horus-chatBox").insertAdjacentHTML(\'afterbegin\', html);\n        document.querySelector("#horus-chatBox .btn-transfer-yes").addEventListener("click", actions.transferOk);\n        document.querySelector("#horus-chatBox .btn-transfer-no").addEventListener("click", actions.transferRefused);\n    };\n    ChatUI.prototype.chatBoxDisable = function (msg, disable) {\n        if (msg) {\n            this.chatMessage({ msgTxt: msg });\n        }\n        var iconShowEmoji = document.querySelector(\'.btn-emoji\');\n        iconShowEmoji.disabled = disable;\n        var iconUploadFile = document.querySelector(\'.btn-upload\');\n        iconUploadFile.disabled = disable;\n        var textarea = document.getElementById(("msgOut"));\n        textarea.disabled = disable;\n    };\n    //exibir um alerta\n    ChatUI.prototype.chatBoxAlert = function (msg, actions) {\n        if (document.querySelector("#horus-chatBox")) {\n            var html = chat_alert_tpl_html_1.default\n                .replace("{{msg}}", msg)\n                .replace("{{btn_text}}", actions.action_text);\n            this.chatBoxAlertClose();\n            document.querySelector("#horus-chatBox").insertAdjacentHTML(\'afterbegin\', html);\n            document.querySelector("#horus-chatBox .btn-action").addEventListener("click", actions.action);\n        }\n    };\n    //exibir uma caixa de confirmação\n    ChatUI.prototype.chatBoxConfirm = function (msg, actions) {\n        var html = chat_confirm_tpl_html_1.default\n            .replace("{{msg}}", msg)\n            .replace("{{btn_text1}}", actions.action_text_1)\n            .replace("{{btn_text2}}", actions.action_text_2);\n        this.chatBoxAlertClose();\n        document.querySelector("#horus-chatBox").insertAdjacentHTML(\'afterbegin\', html);\n        document.querySelector("#horus-chatBox .btn-action.btn_1").addEventListener("click", actions.action_1);\n        document.querySelector("#horus-chatBox .btn-action.btn_2").addEventListener("click", actions.action_2);\n    };\n    /**\n     * Chat Templates - Métodos close\n     */\n    ChatUI.prototype.chatInviteClose = function () {\n        if (document.getElementById("horus-chatRequested"))\n            document.getElementById("horus-chatRequested").outerHTML = "";\n    };\n    ChatUI.prototype.chatRequestClose = function () {\n        if (document.getElementById("horus-askChat"))\n            document.getElementById("horus-askChat").outerHTML = "";\n    };\n    ChatUI.prototype.chatBoxClose = function () {\n        if (document.getElementById("horus-chatBox"))\n            document.getElementById("horus-chatBox").outerHTML = "";\n    };\n    ChatUI.prototype.chatBoxAlertClose = function () {\n        if (document.querySelector("#horus-chatBox .hcb-alert"))\n            document.querySelector("#horus-chatBox .hcb-alert").outerHTML = "";\n    };\n    return ChatUI;\n}());\n/**\n * Chat Templates - Funções Auxiliares\n */\n//controla emojis\nfunction _emojiCtrl() {\n    // show box emoji\n    var icoShowEmoji = document.querySelector(\'.btn-emoji\');\n    var boxEmoji = document.querySelector(\'.popover-emoji\');\n    icoShowEmoji.addEventListener(\'click\', function (e) {\n        boxEmoji.classList.toggle(\'show-emoji\');\n        e.stopPropagation();\n    });\n    // add emoji to textarea\n    var icoEmoji = document.querySelectorAll(\'.emojis-group .emoji\');\n    var txtChat = document.querySelector(".text_area_send_msg");\n    //adiciona listener para cada emoji\n    for (var i = 0; i < icoEmoji.length; i++) {\n        (function (index) {\n            icoEmoji[index].addEventListener(\'click\', function () {\n                txtChat.value += \' \' + icoEmoji[index].innerHTML;\n            });\n        })(i);\n    }\n    document.querySelector(\'.close-emoji\').addEventListener(\'click\', function () { return boxEmoji.classList.remove(\'show-emoji\'); });\n    document.addEventListener(\'click\', function () { return boxEmoji.classList.remove(\'show-emoji\'); });\n}\nvar timmerInChat;\n//adiciona um contador (timer)\nfunction _timeInChat() {\n    var i = 0, i2 = 0;\n    clearInterval(timmerInChat);\n    timmerInChat = setInterval(function () {\n        if (!document.querySelector("#horus-chatBox")) {\n            clearInterval(timmerInChat);\n            return;\n        }\n        var el = document.querySelector("#horus-chatBox .hcb-timmer span.seg");\n        el.innerText = ((i < 10) ? "0" + i : i).toString();\n        if (i == 0) {\n            var el2 = document.querySelector("#horus-chatBox .hcb-timmer span.min");\n            el2.innerText = ((i2 < 10) ? "0" + i2 : i2).toString();\n        }\n        if (i == 59) {\n            i = -1;\n            i2++;\n        }\n        i++;\n    }, 1000);\n}\n//mover caixa de chat\nfunction _moveChatBox() {\n    var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\n    var box = document.getElementById(("horus-chatBox"));\n    var elmnt2 = document.querySelector("#horus-chatBox .button-move");\n    elmnt2.onmousedown = dragMouseDown;\n    function dragMouseDown(e) {\n        e = e || window.event;\n        pos3 = e.clientX;\n        pos4 = e.clientY;\n        document.onmouseup = closeDragElement;\n        document.onmousemove = elementDrag;\n    }\n    function elementDrag(e) {\n        e = e || window.event;\n        pos1 = pos3 - e.clientX;\n        pos2 = pos4 - e.clientY;\n        pos3 = e.clientX;\n        pos4 = e.clientY;\n        var box_top = box.offsetTop - pos2;\n        var box_left = box.offsetLeft - pos1;\n        var box_right = (window.innerWidth - box.offsetLeft) - box.offsetWidth;\n        var box_bottom = (window.innerHeight - box.offsetTop) - box.offsetHeight;\n        if (box_top <= 0 || box_left <= 0)\n            return;\n        if (box_right <= 10 || box_bottom <= 10) {\n            box.style.top = box_top - 10 + "px";\n            box.style.left = box_left - 10 + "px";\n            return;\n        }\n        ;\n        box.style.top = box_top + "px";\n        box.style.left = box_left + "px";\n    }\n    function closeDragElement() {\n        document.onmouseup = null;\n        document.onmousemove = null;\n    }\n}\n//minimizar caixa de chat\nfunction _minimizeChatBox() {\n    document.querySelector("#horus-chatBox .button-minimize").addEventListener("click", function () {\n        document.getElementById("horus-chatBox").removeAttribute("style");\n        document.getElementById("horus-chatBox").classList.toggle(\'chatMin\');\n    });\n}\n//conta e limita caracteres da mensagem\nfunction _countChatChars() {\n    var inputText = document.querySelector(\'#horus-chatBox .text_area_send_msg\');\n    inputText.addEventListener(\'keypress\', function (e) {\n        if (inputText.value.length > 500) {\n            e.preventDefault();\n            if (e.defaultPrevented) {\n                return false;\n            }\n            ;\n        }\n        var el = document.querySelector("#horus-chatBox .hcb-countChars i");\n        el.innerText = (500 - inputText.value.length).toString();\n    });\n    inputText.addEventListener(\'paste\', function () {\n        setTimeout(function () {\n            if (inputText.value.length >= 500) {\n                inputText.value = "";\n                alert("Texto muito grande.");\n            }\n            else {\n                var el = document.querySelector("#horus-chatBox .hcb-countChars i");\n                el.innerText = (500 - inputText.value.length).toString();\n            }\n        }, 0);\n    });\n}\nfunction _expandTextArea() {\n    var inputText = document.querySelector(\'#horus-chatBox .text_area_send_msg\');\n    var chatBox = document.getElementById("horus-chatBox");\n    inputText.addEventListener(\'mouseover\', function (e) {\n        chatBox.classList.add("textAreaExpand");\n    });\n    inputText.addEventListener(\'mouseleave\', function (e) {\n        chatBox.classList.remove("textAreaExpand");\n    });\n}\n//elimina as tags com exceção do <br>\nfunction _clearText(txt) {\n    return new sanitizeHtml_1.SanitizeHtml().SanitizeHtml(txt);\n}\n//formatar data do timestamp\nfunction _moment(timestamp) {\n    if (timestamp) {\n        var date = new Date(Number(timestamp));\n        var formattedDate = (\'0\' + date.getDate()).slice(-2) + \'/\' + (\'0\' + (date.getMonth() + 1)).slice(-2) + \'/\' + date.getFullYear()\n            + \' às \' + (\'0\' + date.getHours()).slice(-2) + \':\' + (\'0\' + date.getMinutes()).slice(-2) + \':\' + (\'0\' + date.getSeconds()).slice(-2);\n        return formattedDate;\n    }\n    return new Date().getTime();\n}\nmodule.exports = (function (props) {\n    return new ChatUI(props);\n});\n\n\n//# sourceURL=webpack://chatUI/./src/components/chat_UI/chat.UI.ts?')},"./src/components/chat_UI/sanitizeHtml.ts":function(module,exports,__webpack_require__){"use strict";eval("/**\n * Módulo helpers para chat UI\n */\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SanitizeHtml = /** @class */ (function () {\n    function SanitizeHtml() {\n        this._tagWhitelist = {\n            'A': true, 'B': true, 'BLOCKQUOTE': true, 'BR': true, 'FONT': true, 'BODY': true,\n            'H1': true, 'H2': true, 'I': true, 'IMG': true, 'LI': true, 'OL': true, 'P': true,\n            'SPAN': true, 'STRONG': true, 'TABLE': true, 'TBODY': true, 'TR': true, 'TD': true, 'TH': true, 'THEAD': true, 'UL': true, 'U': true\n        };\n        this._contentTagWhiteList = { 'FORM': true }; //tags that will be converted to DIVs\n        this._attributeWhitelist = { 'align': true, 'color': true, 'height': true, 'href': true, 'src': true, 'style': true, 'target': true, 'title': true, 'type': true, 'width': true };\n        this._cssWhitelist = { 'color': true, 'background-color': true, 'font-size': true, 'text-align': true, 'text-decoration': true, 'font-weight': true };\n        this._schemaWhiteList = ['http:', 'https:', 'data:']; //which \"protocols\" are allowed in \"href\", \"src\" etc\n        this._uriAttributes = { 'href': true, 'action': true, 'src': true };\n        this._uriContainsWhiteList = [\"bancobrasil.com.br\", \"bb.com.br\", \"bancodobrasil.com.br\"];\n    }\n    SanitizeHtml.prototype.addDomains = function (uri) {\n        this._uriContainsWhiteList.push(uri);\n    };\n    SanitizeHtml.prototype.SanitizeHtml = function (input) {\n        var self = this;\n        input = input.trim();\n        //to save performance and not create iframe and firefox \"bogus node\" workaround\n        if (input == \"\" || input == \"<br>\") {\n            return \"\";\n        }\n        ;\n        var iframe = document.createElement('iframe');\n        if (iframe['sandbox'] === undefined) {\n            alert('Your browser does not support sandboxed iframes. Please upgrade to a modern browser.');\n            return '';\n        }\n        iframe['sandbox'] = 'allow-same-origin';\n        iframe.style.display = 'none';\n        document.body.appendChild(iframe); // necessary so the iframe contains a document\n        var iframedoc = iframe.contentDocument || iframe.contentWindow.document;\n        if (iframedoc.body == null) {\n            iframedoc.write(\"<body></body>\"); // null in IE\n        }\n        iframedoc.body.innerHTML = input;\n        function makeSanitizedCopy(node) {\n            var newNode;\n            if (node.nodeType == Node.TEXT_NODE) {\n                newNode = node.cloneNode(true);\n            }\n            else if (node.nodeType == Node.ELEMENT_NODE && (self._tagWhitelist[node.tagName] || self._contentTagWhiteList[node.tagName])) {\n                //remove useless empty spans (lots of those when pasting from MS Outlook)\n                if ((node.tagName == \"SPAN\" || node.tagName == \"B\" || node.tagName == \"I\" || node.tagName == \"U\")\n                    && node.innerHTML.trim() == \"\") {\n                    return document.createDocumentFragment();\n                }\n                if (self._contentTagWhiteList[node.tagName]) {\n                    newNode = iframedoc.createElement('DIV'); //convert to DIV\n                }\n                else {\n                    newNode = iframedoc.createElement(node.tagName);\n                }\n                for (var i = 0; i < node.attributes.length; i++) {\n                    var attr = node.attributes[i];\n                    if (self._attributeWhitelist[attr.name]) {\n                        if (attr.name == \"style\") {\n                            for (var s = 0; s < node.style.length; s++) {\n                                var styleName = node.style[s];\n                                if (self._cssWhitelist[styleName]) {\n                                    newNode.style.setProperty(styleName, node.style.getPropertyValue(styleName));\n                                }\n                            }\n                        }\n                        else {\n                            if (self._uriAttributes[attr.name]) { //if this is a \"uri\" attribute, that can have \"javascript:\" or something\n                                if (attr.value.indexOf(\":\") > -1 && !self._URIstartsWithAndContains(attr.value)) {\n                                    continue;\n                                }\n                            }\n                            newNode.setAttribute(attr.name, attr.value);\n                        }\n                    }\n                }\n                for (var i = 0; i < node.childNodes.length; i++) {\n                    var subCopy = makeSanitizedCopy(node.childNodes[i]);\n                    newNode.appendChild(subCopy, false);\n                }\n            }\n            else {\n                newNode = document.createDocumentFragment();\n            }\n            return newNode;\n        }\n        var resultElement = makeSanitizedCopy(iframedoc.body);\n        document.body.removeChild(iframe);\n        return resultElement.innerHTML\n            .replace(/<br[^>]*>(\\S)/g, \"<br>\\n$1\")\n            .replace(/div><div/g, \"div>\\n<div\"); //replace is just for cleaner code\n    };\n    SanitizeHtml.prototype._URIstartsWithAndContains = function (str) {\n        var flag = false;\n        //verify protocols\n        for (var i = 0; i < this._schemaWhiteList.length; i++) {\n            if (str.indexOf(this._schemaWhiteList[i]) == 0) {\n                flag = true;\n            }\n        }\n        //verify url partials\n        for (var k = 0; k < this._uriContainsWhiteList.length; k++) {\n            if (str.indexOf(this._uriContainsWhiteList[k]) == -1) {\n                flag = false;\n            }\n            else {\n                flag = true;\n                break;\n            }\n        }\n        return flag;\n    };\n    return SanitizeHtml;\n}());\nexports.SanitizeHtml = SanitizeHtml;\n\n\n//# sourceURL=webpack://chatUI/./src/components/chat_UI/sanitizeHtml.ts?")},"./src/components/chat_UI/templates/chat_alert.tpl.html":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = ("<div class=\\"hcb-alert\\">\\n\\t<div class=\\"hcb-alert-text\\">{{msg}}</div>\\n\\t<div class=\\"hcb-alert-buttons\\">\\n\\t\\t<button class=\\"btn-action\\">{{btn_text}}</button>\\n\\t</div>\\n</div>");\n\n//# sourceURL=webpack://chatUI/./src/components/chat_UI/templates/chat_alert.tpl.html?')},"./src/components/chat_UI/templates/chat_chatBox.tpl.html":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = ("<div id=\\"horus-chatBox\\" class=\\"chatBox\\">\\n\\t<div class=\\"hcb-header\\">\\n\\t\\t<img src=\\"{{assets}}/images/logo_BB.png\\">\\n\\t\\tAtendimento Virtual\\n\\t\\t<div class=\\"bar_buttons\\">\\n\\t\\t\\t<div class=\\"button-move\\" title=\\"Mover chat\\">\\n\\t\\t\\t\\t<img src=\\"{{assets}}/images/move.png\\">\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\"button-minimize\\" title=\\"Minimizar / Maximizar\\">\\n\\t\\t\\t\\t<img src=\\"{{assets}}/images/minus.png\\">\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n\\t<div class=\\"hcb-sub_header\\">\\n\\t\\t<button class=\\"hcb-close\\">Encerrar</button>\\n\\t\\t<div class=\\"hcb-protocol\\"><b>Protocolo: </b>{{protocol}}</div>\\n\\t\\t<div class=\\"hcb-timmer\\">Tempo total do atendimento: <span class=\\"min\\">00</span>:<span class=\\"seg\\">00</span> </div>\\n\\t</div>\\n\\t<div id=\\"chatTxt\\" class=\\"text_area_msgs\\"></div>\\n\\t<div class=\\"typing\\">\\n\\t\\t<svg xmlns=\\"http://www.w3.org/2000/svg\\" version=\\"1.1\\" viewBox=\\"0 0 377 377\\" style=\\"width: 18px;height: 18px;\\">\\n\\t\\t\\t<path fill=\\"currentColor\\" d=\\"M141.41,147.539c-6.6,0-12.755,3.555-16.065,9.277c-2.489,4.303-7.994,5.773-12.297,3.285s-5.773-7.994-3.285-12.297  c6.516-11.267,18.643-18.266,31.647-18.266c13.003,0,25.13,6.999,31.647,18.265c2.489,4.303,1.019,9.809-3.284,12.297  c-1.418,0.821-2.969,1.211-4.498,1.212c-3.108,0-6.131-1.611-7.799-4.495C154.166,151.093,148.009,147.539,141.41,147.539z   M188.75,242.974c-6.6,0-12.756-3.555-16.066-9.277c-2.489-4.303-7.995-5.774-12.297-3.285c-4.303,2.488-5.773,7.994-3.285,12.297  c6.516,11.267,18.643,18.266,31.648,18.266c13.003,0,25.13-6.999,31.647-18.265c2.489-4.303,1.019-9.809-3.284-12.297  c-4.302-2.489-9.808-1.019-12.297,3.283C201.506,239.419,195.35,242.974,188.75,242.974z M377,155.254v41.042  c0,15.308-12.045,28.204-27.353,28.204h-16.622c-5.459,17-14.122,33.459-25.788,48.17c-19.169,24.173-45.547,41.731-74.881,50.584  c-1.319,14.808-13.791,26.247-28.931,26.247h-29.349c-16.017,0-29.048-12.982-29.048-28.999c0-16.021,13.031-29.001,29.048-29.001  h29.349c10.542,0,19.79,5.802,24.881,14.228c55.474-17.164,93.58-68.237,93.58-127.003c0-57.195-36.252-106.083-86.987-124.889  c-13.186,16.208-29.765,29.692-48.292,39.227c-21.189,10.903-45.068,16.667-69.054,16.667c-2.783,0-5.617-0.078-8.422-0.232  c-4.963-0.271-8.767-4.515-8.495-9.478s4.5-8.797,9.478-8.496c2.48,0.136,4.983,0.203,7.44,0.203  c38.001,0,73.151-15.651,98.335-43.363c-8.427-1.752-17.139-2.711-26.062-2.782c-0.052-0.005-0.139-0.012-0.211-0.012  c-0.032,0.002-0.07-0.023-0.103-0.023c-0.069-0.002-0.148-0.046-0.217-0.046c-0.034,0-0.065,0-0.1,0c-0.068,0-0.148,0-0.22,0  c-0.034,0-0.063,0-0.101,0c-0.042,0-0.084,0-0.125,0C115.338,45.5,56,105.314,56,178.725v36.332c0,4.971-4.416,9.443-9.386,9.443  H27.853C12.545,224.5,0,211.604,0,196.296v-41.042c0-12.095,7.786-22.718,19.323-26.432c4.732-1.527,9.837,1.076,11.36,5.809  c1.523,4.73-1.1,9.802-5.832,11.325c-4.007,1.29-6.852,5.113-6.852,9.298v41.042c0,5.382,4.47,10.204,9.853,10.204H38v-27.775  C38,95.388,105.413,27.5,188.75,27.5c0.047,0,0.097,0,0.143,0c0.037,0,0.076,0,0.114,0c0.036,0,0.074,0,0.11,0h0.001  c0.045,0,0.096,0,0.142,0c0.037,0,0.078,0,0.112,0c0.036,0,0.073,0,0.109,0h0.008c0.048,0,0.091,0,0.139,0c0.04,0,0.075,0,0.114,0  c0.038,0,0.083,0,0.122,0c0.045,0,0.086,0,0.131,0c0.039,0,0.072,0,0.111,0c0.049,0,0.086,0,0.131,0c0.041,0,0.083,0,0.126,0  c0.035,0,0.075,0,0.111,0c0.05,0,0.091,0,0.142,0c0.036,0,0.082,0,0.116,0c0.034,0,0.074-0.002,0.108,0c0.046,0,0.099,0,0.146,0  c0.039,0,0.073,0,0.112,0c0.033,0,0.076,0.056,0.107,0.055c0.047,0.002,0.094,0.054,0.143,0.056c0.036-0.001,0.08-0.001,0.114,0.002  c0.032,0,0.076-0.001,0.108,0.002c0.047-0.001,0.098,0.002,0.147,0.002c0.038,0.002,0.071,0.001,0.11,0.003  c0.031,0,0.076,0.001,0.108,0.002c0.045,0.001,0.106,0.004,0.153,0.003c0.037,0.002,0.071,0.002,0.106,0.003  c0.036,0,0.071,0.002,0.106,0.002c0.046,0.003,0.103,0.002,0.149,0.004c0.036-0.001,0.071,0.002,0.108,0.002  c0.036,0.003,0.071,0.003,0.107,0.003c0.047,0.002,0.098,0.002,0.146,0.004c0.037,0.002,0.07,0.002,0.108,0.003  c0.035,0.002,0.074,0.002,0.107,0.002c0.047,0.003,0.084,0.001,0.131,0.003c0.039,0.002,0.079,0,0.119,0  c0.038,0.002,0.07-0.004,0.11-0.002c0.04,0.001,0.077-0.015,0.117-0.007c0.043,0.002,0.087-0.023,0.131-0.018  c0.039,0.001,0.069-0.041,0.11-0.042c0.076,0.003,0.153-0.081,0.229-0.081h0.012c0.036,0,0.074,0,0.11,0h0.006  c13.752,1,27.309,2.961,40.374,7.104c0.183,0.058,0.363,0.268,0.54,0.337c60.779,19.586,104.871,76.798,104.871,144.005  c0,9.278-0.819,18.554-2.434,27.554h12.195c5.382,0,9.353-4.822,9.353-10.204v-41.042c0-4.185-2.646-8.008-6.653-9.298  c-4.731-1.523-7.179-6.594-5.656-11.325s6.492-7.33,11.223-5.81C369.452,132.537,377,143.159,377,155.254z M214.472,320.619  c0-0.745-0.074-1.305-0.215-2.009c-0.02-0.086-0.038-0.251-0.055-0.337c-1.111-4.928-5.521-8.772-10.776-8.772h-29.349  c-6.092,0-11.048,4.907-11.048,10.998c0,6.096,4.956,11.002,11.048,11.002h29.349C209.516,331.5,214.472,326.711,214.472,320.619z   M207.727,160.1c4.302,2.49,9.808,1.019,12.297-3.283c3.311-5.724,9.467-9.278,16.066-9.278s12.756,3.555,16.066,9.278  c1.668,2.884,4.691,4.495,7.799,4.495c1.529-0.001,3.08-0.391,4.498-1.212c4.303-2.488,5.773-7.994,3.284-12.297  c-6.517-11.266-18.644-18.265-31.647-18.265c-13.003,0-25.13,6.999-31.647,18.265C201.954,152.106,203.424,157.612,207.727,160.1z\\"></path>\\n\\t\\t\\t<g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>\\n\\t\\t</svg> &nbsp; O operador está digitando...\\n\\t</div>\\n\\t<div class=\\"hcb-footer\\">\\n\\t\\t<div class=\\"hcb-message-box\\">\\n\\t\\t\\t<textarea id=\\"msgOut\\" placeholder=\\"Digite aqui sua mensagem...\\" sonkeypress=\\"horus.chat.handle(event)\\" class=\\"text_area_send_msg\\"></textarea>\\n\\t\\t</div> \x3c!-- hcb-message-box --\x3e\\n\\t\\t\\n\\t\\t<div class=\\"hcb-footer-actions\\">\\n\\n\\t\\t\\t<div class=\\"emoji-component\\">\\n\\t\\t\\t\\t<div class=\\"popover-emoji\\">\\n\\n\\t\\t\\t\\t\\t<div class=\\"popover__title\\">\\n\\t\\t\\t\\t\\t\\t<p>Emojis</p>\\n\\t\\t\\t\\t\\t\\t<div class=\\"close-emoji\\">\\n\\t\\t\\t\\t\\t\\t\\t<svg aria-hidden=\\"true\\" focusable=\\"false\\" data-prefix=\\"far\\" data-icon=\\"times\\" role=\\"img\\" xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 320 512\\" class=\\"svg-inline--fa fa-times fa-w-10 fa-3x\\"><path fill=\\"currentColor\\" d=\\"M207.6 256l107.72-107.72c6.23-6.23 6.23-16.34 0-22.58l-25.03-25.03c-6.23-6.23-16.34-6.23-22.58 0L160 208.4 52.28 100.68c-6.23-6.23-16.34-6.23-22.58 0L4.68 125.7c-6.23 6.23-6.23 16.34 0 22.58L112.4 256 4.68 363.72c-6.23 6.23-6.23 16.34 0 22.58l25.03 25.03c6.23 6.23 16.34 6.23 22.58 0L160 303.6l107.72 107.72c6.23 6.23 16.34 6.23 22.58 0l25.03-25.03c6.23-6.23 6.23-16.34 0-22.58L207.6 256z\\" class=\\"\\"></path></svg>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t<div class=\\"popover__content\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\"chat_select_messages\\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\"emojis-group\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">🤑</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">😃</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">😉</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">😂</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">🙄</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">😅</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">🤓</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">🤔</div>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\"emojis-group\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">👍</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">👎</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">👈</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">👌</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">👊</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">👏</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">🙏</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"emoji\\">👋</div>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<input type=\\"file\\" id=\\"input-file-upload\\" style=\\"display: none\\">\\n\\t\\t\\t\\t<button class=\\"btn-action btn-emoji\\"><svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 496 512\\" class=\\"svg-inline--fa fa-grin fa-w-16 fa-3x\\"><path fill=\\"currentColor\\" d=\\"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm105.6-151.4c-25.9 8.3-64.4 13.1-105.6 13.1s-79.6-4.8-105.6-13.1c-9.9-3.1-19.4 5.4-17.7 15.3 7.9 47.1 71.3 80 123.3 80s115.3-32.9 123.3-80c1.6-9.8-7.7-18.4-17.7-15.3zM168 240c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32z\\" class=\\"\\"></path></svg></button>\\n\\t\\t\\t\\t<button class=\\"btn-action btn-upload\\" style=\\"display: none\\"><svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 512 512\\"><path fill=\\"currentColor\\" d=\\"M67.508 468.467c-58.005-58.013-58.016-151.92 0-209.943l225.011-225.04c44.643-44.645 117.279-44.645 161.92 0 44.743 44.749 44.753 117.186 0 161.944l-189.465 189.49c-31.41 31.413-82.518 31.412-113.926.001-31.479-31.482-31.49-82.453 0-113.944L311.51 110.491c4.687-4.687 12.286-4.687 16.972 0l16.967 16.971c4.685 4.686 4.685 12.283 0 16.969L184.983 304.917c-12.724 12.724-12.73 33.328 0 46.058 12.696 12.697 33.356 12.699 46.054-.001l189.465-189.489c25.987-25.989 25.994-68.06.001-94.056-25.931-25.934-68.119-25.932-94.049 0l-225.01 225.039c-39.249 39.252-39.258 102.795-.001 142.057 39.285 39.29 102.885 39.287 142.162-.028A739446.174 739446.174 0 0 1 439.497 238.49c4.686-4.687 12.282-4.684 16.969.004l16.967 16.971c4.685 4.686 4.689 12.279.004 16.965a755654.128 755654.128 0 0 0-195.881 195.996c-58.034 58.092-152.004 58.093-210.048.041z\\"></path></svg></button>\\n\\t\\t\\t</div>\\n\\n\\t\\t\\t<button id=\\"sendMsgBtn\\" class=\\"btnSend horus-button\\">Enviar</button>\\n\\t\\t</div> \x3c!-- ./hcb-footer-actions --\x3e\\n\\t\\t<div class=\\"hcb-countChars\\"><i>500</i> caracteres restantes</div>\\n\\t</div>\\n</div>");\n\n//# sourceURL=webpack://chatUI/./src/components/chat_UI/templates/chat_chatBox.tpl.html?')},"./src/components/chat_UI/templates/chat_confirm.tpl.html":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = ("<div class=\\"hcb-alert\\">\\n\\t<div class=\\"hcb-alert-text\\">{{msg}}</div>\\n\\t<div class=\\"hcb-alert-buttons\\">\\n\\t\\t<button class=\\"btn-action btn_1\\">{{btn_text1}}</button>\\n\\t\\t<button class=\\"btn-action btn_2\\">{{btn_text2}}</button>\\n\\t</div>\\n</div>");\n\n//# sourceURL=webpack://chatUI/./src/components/chat_UI/templates/chat_confirm.tpl.html?')},"./src/components/chat_UI/templates/chat_invite.tpl.html":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = ("<div id=\\"horus-chatRequested\\">\\n\\t<div class=\\"chat_request\\">\\n\\t\\t<img src=\\"{{assets}}/images/logo_BB_fundo.png\\" class=\\"hcr-logo_fundo\\">\\n\\t\\t<h2 class=\\"header\\">\\n\\t\\t\\t<img src=\\"{{assets}}/images/logo_BB.png\\">\\n\\t\\t\\t{{title}}\\n\\t\\t\\t<button id=\\"chatRequestNo\\" class=\\"btn_refused\\">\\n\\t\\t\\t\\t<svg aria-hidden=\\"true\\" focusable=\\"false\\" data-prefix=\\"fas\\" data-icon=\\"times\\" role=\\"img\\" xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 352 512\\"><path fill=\\"currentColor\\" d=\\"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z\\" class=\\"\\"></path></svg>\\n\\t\\t\\t</button>\\n\\t\\t</h2>\\n\\t\\t<div class=\\"info\\">\\n\\t\\t\\t{{text}}\\n\\t\\t</div>\\n\\t\\t<img src=\\"{{assets}}/images/assistenteBB.png\\" class=\\"hcr-img_user\\">\\n\\t\\t<div class=\\"actions\\">\\n\\t\\t\\t<button id=\\"chatRequestWaiting\\" class=\\"hcr-btn_waiting\\">AGORA NÃO</button>\\n\\t\\t\\t<button id=\\"chatRequestYes\\" class=\\"hcr-btn_accept\\">ACEITAR CHAT</button>\\n\\t\\t</div>\\n\\t</div>\\n</div>");\n\n//# sourceURL=webpack://chatUI/./src/components/chat_UI/templates/chat_invite.tpl.html?')},"./src/components/chat_UI/templates/chat_msgOp.tpl.html":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = ("<div class=\\"messageDiv operator-div\\">\\n\\t<span class=\\"message operator-span\\">\\n\\t\\t{{msgTxt}}\\n\\t\\t<br><span class=\\"span-horario\\">{{opName}}, {{time}}</span>\\n\\t</span>\\n</div>");\n\n//# sourceURL=webpack://chatUI/./src/components/chat_UI/templates/chat_msgOp.tpl.html?')},"./src/components/chat_UI/templates/chat_msgOpFile.tpl.html":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = ("<div class=\\"messageDiv operator-div\\" id=\\"file_{{fileID}}\\">\\n\\t<span class=\\"message operator-span\\">\\n\\t\\t<div class=\\"file\\">\\n\\t\\t\\t<div class=\\"icon-file\\">\\n\\t\\t\\t\\t<svg xmlns=\\"http://www.w3.org/2000/svg\\" enable-background=\\"new 0 0 500 500\\" heigth=\\"24px\\" width=\\"24px\\" viewBox=\\"0 0 500 500\\">\\n\\t\\t\\t\\t\\t<g fill=\\"currentColor\\"><g><g><path d=\\"M192.4,367.2c-13.2,0-26.3-5-36.3-15c-20-20-20-52.7,0-72.7l19.4,19.4c-4.5,4.5-7,10.6-7,17c0,6.4,2.5,12.4,7,17     c9.1,9.1,24.9,9.1,34,0l19.4,19.4C218.8,362.2,205.6,367.2,192.4,367.2z\\"></path></g><g><g><path d=\\"M165.8,289.2\\" fill=\\"none\\" stroke=\\"#000000\\" stroke-miterlimit=\\"10\\" stroke-width=\\"2\\"></path></g><g><path d=\\"M178.1,430.3c-25.8,0-51.5-9.8-71.1-29.4c-19-19-29.5-44.2-29.5-71.1c0-25.6,9.5-49.7,26.8-68.4l-0.2-0.2L273.2,92.3      l0,0c14.3-13.9,33.1-21.6,53.1-21.6c20.4,0,39.5,7.9,53.9,22.3c14.4,14.4,22.3,33.5,22.3,53.9c0,19.1-7,37.1-19.7,51.1l0.1,0.1      l-2.2,2.2c-0.2,0.2-0.3,0.3-0.5,0.5l0,0L223.9,357.1l-19.4-19.4l157.3-157.3c8.6-9.1,13.3-21,13.3-33.6c0-13-5.1-25.3-14.3-34.5      c-18.4-18.4-50.6-18.4-69.1,0L126.3,277.9l0.1,0.1c-13.8,13.8-21.4,32.2-21.4,51.8s7.6,37.9,21.4,51.8      c28.5,28.5,74.9,28.5,103.4,0.1l173.3-173.3l19.4,19.4L245.6,404.6l-0.1-0.1C226.4,421.7,202.3,430.3,178.1,430.3z\\"></path></g></g></g><g><path d=\\"M165.8,289.2\\" fill=\\"none\\" stroke=\\"#000000\\" stroke-miterlimit=\\"10\\" stroke-width=\\"2\\"></path></g><g><rect height=\\"27.4\\" transform=\\"matrix(0.7071 -0.7071 0.7071 0.7071 -82.669 232.2579)\\" width=\\"207.2\\" x=\\"135.4\\" y=\\"202.2\\"></rect></g></g>\\n\\t\\t\\t\\t</svg>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\"file-name\\">{{fileName}}</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\"file-action\\">\\n\\t\\t\\t<span>{{msgTxt}}</span>\\n\\t\\t\\t<div class=\\"progress\\">\\n\\t\\t\\t\\t<div class=\\"downloaded\\"></div>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\"icon-action\\" title=\\"Clique para baixar\\">\\n\\t\\t\\t\\t<svg xmlns=\\"http://www.w3.org/2000/svg\\" height=\\"15px\\" viewBox=\\"0 0 14 18\\">\\n\\t\\t\\t\\t\\t<g fill=\\"currentColor\\"><g transform=\\"translate(-383.000000, -213.000000)\\"><g transform=\\"translate(383.000000, 213.500000)\\"><path d=\\"M14,6 L10,6 L10,0 L4,0 L4,6 L0,6 L7,13 L14,6 L14,6 Z M0,15 L0,17 L14,17 L14,15 L0,15 L0,15 Z\\" id=\\"Shape\\"></path></g></g></g>\\n\\t\\t\\t\\t</svg>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<span class=\\"span-horario\\">Operador, {{time}}</span>\\n\\t</span>\\n</div>");\n\n//# sourceURL=webpack://chatUI/./src/components/chat_UI/templates/chat_msgOpFile.tpl.html?')},"./src/components/chat_UI/templates/chat_msgSrv.tpl.html":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = ("<div class=\\"messageDiv transfer-div\\">\\n\\t<span class=\\"message transfer-span\\">\\n\\t\\t{{msgTxt}}\\n\\t\\t<br><span class=\\"span-horario\\">{{time}}</span>\\n\\t</span>\\n</div>");\n\n//# sourceURL=webpack://chatUI/./src/components/chat_UI/templates/chat_msgSrv.tpl.html?')},"./src/components/chat_UI/templates/chat_msgVis.tpl.html":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = ("<div class=\\"messageDiv\\">\\n\\t<span id=\\"{{msgID}}\\" class=\\"message clientMessage\\">\\n\\t\\t<li class=\\"checks Watch-20\\"></li>{{msgTxt}}\\n\\t\\t<br><span class=\\"span-horario\\">Você, {{time}} </span>\\n\\t</span>\\n</div>");\n\n//# sourceURL=webpack://chatUI/./src/components/chat_UI/templates/chat_msgVis.tpl.html?')},"./src/components/chat_UI/templates/chat_msgVisFile.tpl.html":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = ("<div class=\\"messageDiv\\" id=\\"file_{{fileID}}\\">\\n\\t<span class=\\"message clientMessage\\">\\n\\t\\t<div class=\\"file\\">\\n\\t\\t\\t<div class=\\"icon-file\\">\\n\\t\\t\\t\\t<svg xmlns=\\"http://www.w3.org/2000/svg\\" enable-background=\\"new 0 0 500 500\\" heigth=\\"24px\\" width=\\"24px\\" viewBox=\\"0 0 500 500\\">\\n\\t\\t\\t\\t\\t<g fill=\\"currentColor\\"><g><g><path d=\\"M192.4,367.2c-13.2,0-26.3-5-36.3-15c-20-20-20-52.7,0-72.7l19.4,19.4c-4.5,4.5-7,10.6-7,17c0,6.4,2.5,12.4,7,17     c9.1,9.1,24.9,9.1,34,0l19.4,19.4C218.8,362.2,205.6,367.2,192.4,367.2z\\"></path></g><g><g><path d=\\"M165.8,289.2\\" fill=\\"none\\" stroke=\\"#000000\\" stroke-miterlimit=\\"10\\" stroke-width=\\"2\\"></path></g><g><path d=\\"M178.1,430.3c-25.8,0-51.5-9.8-71.1-29.4c-19-19-29.5-44.2-29.5-71.1c0-25.6,9.5-49.7,26.8-68.4l-0.2-0.2L273.2,92.3      l0,0c14.3-13.9,33.1-21.6,53.1-21.6c20.4,0,39.5,7.9,53.9,22.3c14.4,14.4,22.3,33.5,22.3,53.9c0,19.1-7,37.1-19.7,51.1l0.1,0.1      l-2.2,2.2c-0.2,0.2-0.3,0.3-0.5,0.5l0,0L223.9,357.1l-19.4-19.4l157.3-157.3c8.6-9.1,13.3-21,13.3-33.6c0-13-5.1-25.3-14.3-34.5      c-18.4-18.4-50.6-18.4-69.1,0L126.3,277.9l0.1,0.1c-13.8,13.8-21.4,32.2-21.4,51.8s7.6,37.9,21.4,51.8      c28.5,28.5,74.9,28.5,103.4,0.1l173.3-173.3l19.4,19.4L245.6,404.6l-0.1-0.1C226.4,421.7,202.3,430.3,178.1,430.3z\\"></path></g></g></g><g><path d=\\"M165.8,289.2\\" fill=\\"none\\" stroke=\\"#000000\\" stroke-miterlimit=\\"10\\" stroke-width=\\"2\\"></path></g><g><rect height=\\"27.4\\" transform=\\"matrix(0.7071 -0.7071 0.7071 0.7071 -82.669 232.2579)\\" width=\\"207.2\\" x=\\"135.4\\" y=\\"202.2\\"></rect></g></g>\\n\\t\\t\\t\\t</svg>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\"file-name\\">{{fileName}}</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\"file-action\\">\\n\\t\\t\\t<span>{{msgTxt}}</span>\\n\\t\\t\\t<div class=\\"progress\\">\\n\\t\\t\\t\\t<div class=\\"downloaded\\"></div>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\"icon-action\\" title=\\"Cancelar o envio\\">\\n\\t\\t\\t\\t<svg xmlns=\\"http://www.w3.org/2000/svg\\" version=\\"1.1\\" width=\\"20px\\" height=\\"15px\\" viewBox=\\"10 -2 22 45\\">\\n\\t\\t\\t\\t\\t<g fill=\\"currentColor\\">\\n\\t\\t\\t\\t\\t\\t<path d=\\"M27.948,20.878L40.291,8.536c1.953-1.953,1.953-5.119,0-7.071c-1.951-1.952-5.119-1.952-7.07,0L20.878,13.809L8.535,1.465   c-1.951-1.952-5.119-1.952-7.07,0c-1.953,1.953-1.953,5.119,0,7.071l12.342,12.342L1.465,33.22c-1.953,1.953-1.953,5.119,0,7.071   C2.44,41.268,3.721,41.755,5,41.755c1.278,0,2.56-0.487,3.535-1.464l12.343-12.342l12.343,12.343   c0.976,0.977,2.256,1.464,3.535,1.464s2.56-0.487,3.535-1.464c1.953-1.953,1.953-5.119,0-7.071L27.948,20.878z\\"/>\\n\\t\\t\\t\\t\\t</g>\\n\\t\\t\\t\\t</svg>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<span class=\\"span-horario\\">Você, {{time}} </span>\\n\\t</span>\\n</div>");\n\n//# sourceURL=webpack://chatUI/./src/components/chat_UI/templates/chat_msgVisFile.tpl.html?')},"./src/components/chat_UI/templates/chat_request.tpl.html":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = ("<div id=\\"horus-askChat\\" class=\\"no-print\\">\\n\\t<div class=\\"hac-ask\\" title=\\"Clique para solicitar\\">\\n\\t\\t<p>POSSO AJUDAR ?</p>\\n\\t</div>\\n\\t<div class=\\"hac-box\\">\\n\\t\\t<img src=\\"{{assets}}/images/logo_BB_fundo.png\\" class=\\"hcr-logo_fundo\\">\\n\\t\\t<h2 class=\\"header\\">\\n\\t\\t\\t<img src=\\"{{assets}}/images/logo_BB.png\\">\\n\\t\\t\\t{{title}}\\n\\t\\t</h2>\\n\\t\\t<div class=\\"info\\">\\n\\t\\t\\t{{text}}\\n\\t\\t</div>\\n\\t\\t<img src=\\"{{assets}}/images/assistenteBB.png\\" class=\\"hcr-img_user\\">\\n\\t\\t<div class=\\"actions\\">\\n\\t\\t\\t<button class=\\"hcr-btn_accept\\">INICIAR CHAT</button>\\n\\t\\t</div>\\n\\t</div>\\n</div>");\n\n//# sourceURL=webpack://chatUI/./src/components/chat_UI/templates/chat_request.tpl.html?')},"./src/components/chat_UI/templates/chat_transferConfirm.tpl.html":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = ("<div class=\\"hcb-alert\\">\\n\\t<div class=\\"hcb-alert-text\\">{{msg}}</div>\\n\\t<div class=\\"hcb-alert-buttons\\">\\n\\t\\t<button class=\\"btn-action btn-transfer-yes\\">Sim</button> \\n\\t\\t<button class=\\"btn-action btn-transfer-no\\">Não</button>\\n\\t</div>\\n</div>");\n\n//# sourceURL=webpack://chatUI/./src/components/chat_UI/templates/chat_transferConfirm.tpl.html?')}}),interactionsUI=function(n){var o={};function s(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}return s.m=n,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s="./src/components/interactions_UI/interactions.UI.ts")}({"./src/components/interactions_UI/interactions.UI.ts":function(module,exports,__webpack_require__){"use strict";eval('/**\n * Módulo interactions template\n */\n\nvar container_tpl_html_1 = __webpack_require__(/*! ./templates/container.tpl.html */ "./src/components/interactions_UI/templates/container.tpl.html");\nvar InteractionsUI = /** @class */ (function () {\n    function InteractionsUI(props) {\n        this.props = props;\n    }\n    // adiciona um container de interações com o conteúdo recebido\n    InteractionsUI.prototype.addInteractionContainer = function (appendIn, data) {\n        var _this = this;\n        var timmer;\n        var id_container = "";\n        var selector_close = ".btn_refused";\n        if (document.getElementById("interaction_" + data.id))\n            return;\n        if (data.id) {\n            id_container = "interaction_" + data.id;\n            selector_close = "#interaction_" + data.id + " .btn_refused";\n        }\n        var html = container_tpl_html_1.default\n            .replace(/{{assets}}/g, this.props.assets)\n            .replace(/{{title}}/, data.title)\n            .replace(/{{id_container}}/, id_container)\n            .replace(/{{content}}/, data.content);\n        if (!appendIn)\n            return html;\n        document.querySelector(appendIn).insertAdjacentHTML(\'beforeend\', html);\n        document.querySelector(selector_close).addEventListener("click", function () {\n            clearTimeout(timmer);\n            document.getElementById(id_container).classList.add(\'hide\');\n            setTimeout(function () { data.onClose(); _this.interactionClose(data.id); }, 1000);\n        });\n        var linksToast = document.querySelectorAll(\'.actions a\');\n        linksToast.forEach(function (item) {\n            item.addEventListener("click", function () {\n                clearTimeout(timmer);\n                // document.getElementById(id_container).classList.add(\'hide\');\n                setTimeout(function () { data.onClicked(); }, 1000);\n            });\n        });\n        if (data.exibitionTime) {\n            timmer = setTimeout(function () {\n                document.getElementById(id_container).classList.add(\'hide\');\n                data.onTimed();\n                _this.interactionClose(data.id);\n            }, data.exibitionTime * 1000);\n        }\n    };\n    /**\n     * Cria uma janela modal\n     * @param {string} content - html para ser acoplado no template da modal.\n     * @param {object} events - eventos a serem acionados\n     * @param {object} params - objeto opcional com opções para o modal Ex.: {width:\'640px\', height:\'390px\', time:5}\n     */\n    InteractionsUI.prototype.createModal = function (content, events, params) {\n        var _this = this;\n        this.modalClose();\n        var html = "<div id=\\"horus-modal\\">\\n                        <div class=\\"horus-modalContent\\">\\n                            <span class=\\"horus-modalClose\\">&times;</span>\\n                            " + content + "\\n                        </div>\\n                    </div>";\n        document.querySelector("body").insertAdjacentHTML(\'beforeend\', html);\n        document.querySelector("#horus-modal .horus-modalClose").addEventListener("click", function () {\n            events.onClose() || _this.modalClose();\n        });\n        if (params) {\n            //define altura e largura do modal\n            if (params.width && params.height) {\n                var modalContent = document.querySelector(".horus-modalContent");\n                modalContent.style.width = params.width;\n                modalContent.style.height = params.height;\n            }\n            //define o tempo de exibição do modal\n            if (params.time) {\n                this.activeTimeout = setTimeout(function () {\n                    events.onTimed();\n                    _this.modalClose();\n                }, params.time * 1000);\n            }\n        }\n    };\n    /**\n     * Interactions Templates - Métodos close\n     */\n    InteractionsUI.prototype.interactionClose = function (id) {\n        if (id) {\n            if (document.getElementById("interaction_" + id))\n                document.getElementById("interaction_" + id).outerHTML = "";\n            return;\n        }\n        if (document.querySelector(".horus-interactionContainer"))\n            document.querySelector(".horus-interactionContainer").outerHTML = "";\n    };\n    InteractionsUI.prototype.modalClose = function () {\n        if (document.getElementById("horus-modal"))\n            document.getElementById("horus-modal").outerHTML = "";\n    };\n    return InteractionsUI;\n}());\nmodule.exports = (function (props) {\n    return new InteractionsUI(props);\n});\n\n\n//# sourceURL=webpack://interactionsUI/./src/components/interactions_UI/interactions.UI.ts?')},"./src/components/interactions_UI/templates/container.tpl.html":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__["default"] = ("<div class=\\"horus-interactionContainer\\" id=\\"{{id_container}}\\">\\n\\t<div class=\\"wrap_elements\\">\\n\\t\\t<h2 class=\\"header\\">\\n\\t\\t\\t<img src=\\"{{assets}}/images/logo_BB.png\\">\\n\\t\\t\\t{{title}}\\n\\t\\t\\t<button class=\\"btn_refused\\">\\n\\t\\t\\t\\t<svg aria-hidden=\\"true\\" focusable=\\"false\\" data-prefix=\\"fas\\" data-icon=\\"times\\" role=\\"img\\" xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 352 512\\"><path fill=\\"currentColor\\" d=\\"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z\\" class=\\"\\"></path></svg>\\n\\t\\t\\t</button>\\n\\t\\t</h2>\\n\\t\\t<div class=\\"content\\">\\n\\t\\t\\t{{content}}\\n\\t\\t</div>\\n\\t</div>\\n</div>");\n\n//# sourceURL=webpack://interactionsUI/./src/components/interactions_UI/templates/container.tpl.html?')}}),Horus=function(n){var o={};function s(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}return s.m=n,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s="./src/api/main.ts")}({"./node_modules/events/events.js":function(module,exports,__webpack_require__){"use strict";eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\n\n//# sourceURL=webpack://Horus/./node_modules/events/events.js?")},"./settings/connection.ts":function(module,exports,__webpack_require__){"use strict";eval('\nObject.defineProperty(exports, "__esModule", { value: true });\nexports.default = {\n    "enviroments": {\n        "dev": {\n            "protocol": "ws",\n            "host": "10.254.0.48",\n            "port": 8484\n        },\n        "hm": {\n            "protocol": "ws",\n            "host": "172.20.118.168",\n            "port": 8484\n        },\n        "prod": {\n            "protocol": "wss",\n            "host": "www101.bb.com.br",\n            "port": 443\n        },\n        "internal_prod": {\n            "protocol": "ws",\n            "host": "motores-horus.bb.com.br",\n            "port": 8484\n        }\n    },\n    "connectOptions": {\n        "path": "/mqtt",\n        "protocolId": "MQTT",\n        "protocolVersion": 4,\n        "clean": true,\n        "reconnectPeriod": 2000,\n        "keepalive": 0\n    }\n};\n\n\n//# sourceURL=webpack://Horus/./settings/connection.ts?')},"./settings/general.ts":function(module,exports,__webpack_require__){"use strict";eval('\nObject.defineProperty(exports, "__esModule", { value: true });\nexports.default = {\n    "apiVersion": 180,\n    "debug": false,\n    "mock": false,\n    "connectDesconnectMsg": {\n        "meta": {\n            "uuid": ""\n        },\n        "header": {\n            "apiKey": "", "signature": "", "nonce": 0\n        },\n        "envelope": {\n            "channel": "", "wireID": ""\n        }\n    }\n};\n\n\n//# sourceURL=webpack://Horus/./settings/general.ts?')},"./src/api/avro/avroDefaults.ts":function(module,exports,__webpack_require__){"use strict";eval('/**\n * AvroDefaults, padrão de mensagens hórus\n */\n\nObject.defineProperty(exports, "__esModule", { value: true });\nvar AvroDefaults = /** @class */ (function () {\n    function AvroDefaults() {\n    }\n    //Default Horus Schema\n    AvroDefaults.schema = function (subSchema, type) {\n        var schema = {\n            "type": "record",\n            "name": "requestResponse",\n            "fields": [\n                {\n                    "name": "meta",\n                    "type": {\n                        "type": "record",\n                        "fields": [\n                            { "name": "uuid", "type": "string" }\n                        ]\n                    }\n                },\n                {\n                    "name": "header",\n                    "type": {\n                        "type": "record",\n                        "fields": [\n                            { "name": "apiKey", "type": "string" },\n                            { "name": "signature", "type": "string" },\n                            { "name": "nonce", "type": "int" }\n                        ]\n                    }\n                },\n                {\n                    "name": "envelope",\n                    "type": subSchema\n                }\n            ]\n        };\n        if (type === "res") {\n            schema.fields[0].type.fields.push({ "name": "code", "type": "int" });\n            schema.fields[0].type.fields.push({ "name": "message", "type": "string" });\n        }\n        return schema;\n    };\n    //Default Horus Json\n    AvroDefaults.json = function (subJson, type) {\n        var json = {\n            "meta": {\n                "uuid": "f385f010-466f-bd8e-eb67-015f25fa8e54"\n            },\n            "header": {\n                "apiKey": "put your key here",\n                "signature": "here is your signature topic+payload message",\n                "nonce": 123456\n            },\n            "envelope": subJson\n        };\n        if (type === "res") {\n            json.meta.code = 200;\n            json.meta.message = "Success";\n        }\n        return json;\n    };\n    return AvroDefaults;\n}());\nexports.AvroDefaults = AvroDefaults;\n\n\n//# sourceURL=webpack://Horus/./src/api/avro/avroDefaults.ts?')},"./src/api/avro/avroHelper.ts":function(module,exports,__webpack_require__){"use strict";eval("/**\n * AvroHelper, Avro decode / encode\n */\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar avsc = __webpack_require__(/*! avsc */ \"avsc\");\nvar avroSchemas_1 = __webpack_require__(/*! ./avroSchemas */ \"./src/api/avro/avroSchemas.ts\");\nvar avroDefaults_1 = __webpack_require__(/*! ./avroDefaults */ \"./src/api/avro/avroDefaults.ts\");\nvar AvroHelper = /** @class */ (function () {\n    function AvroHelper() {\n    }\n    //cria uma mensagem avro\n    AvroHelper.encode = function (schema, json) {\n        var sch = (typeof schema === 'string') ? avroSchemas_1.AvroSchemas[schema] : schema;\n        var msg = avsc.Type.forSchema(sch);\n        return msg.toBuffer(json);\n    };\n    AvroHelper.encodeRes = function (schema, json) {\n        var sch = (typeof schema === 'string') ? avroSchemas_1.AvroSchemas[schema] : schema;\n        return this.encode(avroDefaults_1.AvroDefaults.schema(sch, 'res'), avroDefaults_1.AvroDefaults.json(json, 'res'));\n    };\n    AvroHelper.encodeReq = function (schema, json) {\n        var sch = (typeof schema === 'string') ? avroSchemas_1.AvroSchemas[schema] : schema;\n        return this.encode(avroDefaults_1.AvroDefaults.schema(sch), avroDefaults_1.AvroDefaults.json(json));\n    };\n    //lê uma mensagem avro, transforma em json\n    AvroHelper.decode = function (schema, buffer) {\n        var sch = (typeof schema === 'string') ? avroSchemas_1.AvroSchemas[schema] : schema;\n        var msg = avsc.Type.forSchema(schema);\n        var res = msg.fromBuffer(buffer);\n        return res;\n    };\n    AvroHelper.decodeRes = function (schema, buffer) {\n        var sch = (typeof schema === 'string') ? avroSchemas_1.AvroSchemas[schema] : schema;\n        return this.decode(avroDefaults_1.AvroDefaults.schema(sch, 'res'), buffer);\n    };\n    AvroHelper.decodeReq = function (schema, buffer) {\n        var sch = (typeof schema === 'string') ? avroSchemas_1.AvroSchemas[schema] : schema;\n        return this.decode(avroDefaults_1.AvroDefaults.schema(sch), buffer);\n    };\n    return AvroHelper;\n}());\nexports.AvroHelper = AvroHelper;\n\n\n//# sourceURL=webpack://Horus/./src/api/avro/avroHelper.ts?")},"./src/api/avro/avroSchemas.ts":function(module,exports,__webpack_require__){"use strict";eval('/**\n * AvroSchemas, schemas avro\n */\n\nObject.defineProperty(exports, "__esModule", { value: true });\nvar AvroSchemas = /** @class */ (function () {\n    function AvroSchemas() {\n    }\n    AvroSchemas.enterTheRoom = {\n        "name": "addOperator",\n        "type": "record",\n        "fields": [\n            { "name": "opID", "type": "string" },\n            { "name": "roomID", "type": "int" },\n            { "name": "opName", "type": "string" },\n            { "name": "reactive", "type": "boolean" },\n            { "name": "type", "type": "string" }\n        ]\n    };\n    ///////////////////////////////////////////////////////\n    AvroSchemas.exitTheRoom = {\n        "name": "removeOperator",\n        "type": "record",\n        "fields": [\n            { "name": "opID", "type": "string" },\n            { "name": "roomID", "type": "int" }\n        ]\n    };\n    ///////////////////////////////////////////////////////\n    AvroSchemas.changeState = {\n        "name": "changeState",\n        "type": "record",\n        "fields": [\n            {\n                "name": "opID",\n                "type": "string"\n            },\n            {\n                "name": "state",\n                "type": "int"\n            },\n            {\n                "name": "roomID",\n                "type": "int"\n            }\n        ]\n    };\n    ///////////////////////////////////////////////////////\n    AvroSchemas.qtdReactiveUsers = {\n        "name": "qtdReactiveUsers",\n        "type": "record",\n        "fields": [\n            { "name": "total", "type": "int" },\n            { "name": "priority", "type": "int" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.chatReactiveReq = {\n        "name": "reqReactiveState",\n        "type": "record",\n        "fields": [\n            { "name": "roomID", "type": "int" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.resReactiveUser = {\n        "name": "resReactiveUser",\n        "type": "record",\n        "fields": [\n            { "name": "visID", "type": "string" },\n            { "name": "sessionID", "type": "string" },\n            { "name": "timestamp", "type": "long" },\n            { "name": "protocol", "type": "string" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.chatReactiveRes = {\n        "name": "chatReactive",\n        "type": "record",\n        "fields": [\n            { "name": "reactive", "type": "boolean" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.roomStateChangedBySupervisor = {\n        "name": "roomStateChangedBySupervisor",\n        "type": "record",\n        "fields": [\n            { "name": "reactive", "type": "boolean" },\n            { "name": "message", "type": "string" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.elementsToMonit = {\n        "name": "elementsToMonit",\n        "type": "record",\n        "fields": [\n            { "name": "visID", "type": "string" },\n            { "name": "channel", "type": "string" },\n            { "name": "origin", "type": "string" }\n        ]\n    };\n    AvroSchemas.elementsToMonitRes = {\n        "name": "elmsToMonit",\n        "type": "record",\n        "fields": [{\n                "name": "elms",\n                "type": {\n                    "type": "array",\n                    "items": {\n                        "type": "record",\n                        "fields": [\n                            { "name": "ElmID", "type": "string" },\n                            { "name": "ElmSelector", "type": "string" },\n                            { "name": "ElmTimerInterval", "type": "string" },\n                            { "name": "ElmEventName", "type": "string" },\n                            { "name": "ElmEventValue", "type": "string" },\n                            { "name": "ElmDataType", "type": "string" },\n                            { "name": "ElmCycles", "type": "string" }\n                        ]\n                    }\n                }\n            }]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.chatRequest = {\n        "name": "chatRequest",\n        "type": "record",\n        "fields": [\n            { "name": "sessionID", "type": "string" },\n            { "name": "priority", "type": "int" },\n            { "name": "protocol", "type": "string" },\n            { "name": "roomID", "type": "int" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.chatStarted = {\n        "name": "ChatStarted",\n        "type": "record",\n        "fields": [\n            { "name": "roomID", "type": "int" },\n            { "name": "opID", "type": "string" },\n            { "name": "opName", "type": "string" },\n            { "name": "sessionID", "type": "string" },\n            { "name": "protocol", "type": "string" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.chatMessage = {\n        "name": "ChatMessage",\n        "type": "record",\n        "fields": [\n            { "name": "protocol", "type": "string" },\n            { "name": "agent", "type": "string" },\n            { "name": "agentID", "type": "string" },\n            { "name": "agentName", "type": "string" },\n            { "name": "msgID", "type": "string" },\n            { "name": "msgTxt", "type": "string" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.statusChatMsg = {\n        "name": "chatMsgCtrl",\n        "type": "record",\n        "fields": [\n            { "name": "protocol", "type": "string" },\n            { "name": "agent", "type": "string" },\n            { "name": "msgID", "type": "string" },\n            { "name": "msgStatus", "type": "int" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.messageTyping = {\n        "name": "chatMessageTypingStatus",\n        "type": "record",\n        "fields": [\n            { "name": "protocol", "type": "string" },\n            { "name": "agent", "type": "string" },\n            { "name": "sessionID", "type": "string" },\n            { "name": "typing", "type": "boolean" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.chatClosed = {\n        "name": "ChatClosed",\n        "type": "record",\n        "fields": [\n            { "name": "protocol", "type": "string" },\n            { "name": "agent", "type": "string" }\n        ]\n    };\n    //////////////////////////////////////////////////\n    AvroSchemas.chatResponse = {\n        "name": "chatResponse",\n        "type": "record",\n        "fields": [\n            {\n                "name": "visitor",\n                "type": {\n                    "name": "visitor",\n                    "type": "record",\n                    "fields": [\n                        { "name": "ID", "type": "string" },\n                        { "name": "name", "type": "string" },\n                        { "name": "codDep", "type": "int" }\n                    ]\n                }\n            },\n            {\n                "name": "operator",\n                "type": {\n                    "name": "operator",\n                    "type": "record",\n                    "fields": [\n                        { "name": "ID", "type": "string" },\n                        { "name": "name", "type": "string" },\n                        { "name": "codDep", "type": "int" }\n                    ]\n                }\n            },\n            { "name": "sessionID", "type": "string" },\n            { "name": "agent", "type": "string" },\n            { "name": "roomID", "type": "int" },\n            { "name": "response", "type": "int" },\n            { "name": "channel", "type": "string" },\n            { "name": "requestedAt", "type": "long" }\n        ]\n    };\n    //////////////////////////////////////////////////\n    AvroSchemas.chatHistoryRequest = {\n        "name": "chatHistoryRequest",\n        "type": "record",\n        "fields": [\n            { "name": "protocol", "type": "string" },\n            { "name": "agent", "type": "string" },\n            { "name": "fsm", "type": "string" }\n        ]\n    };\n    //////////////////////////////////////////////////\n    AvroSchemas.chatHistoryResponse = {\n        "name": "ChatHistoryResponse",\n        "type": "record",\n        "fields": [\n            { "name": "protocol", "type": "string" },\n            { "name": "requestedBy", "type": "string" },\n            {\n                "name": "messages",\n                "type": {\n                    "type": "array",\n                    "items": {\n                        "name": "Message",\n                        "type": "record",\n                        "fields": [\n                            { "name": "agent", "type": "string" },\n                            { "name": "agentID", "type": "string" },\n                            { "name": "agentName", "type": "string" },\n                            { "name": "timestamp", "type": "long" },\n                            { "name": "msgID", "type": "string" },\n                            { "name": "msgTxt", "type": "string" },\n                            { "name": "msgStatus", "type": "int" }\n                        ]\n                    }\n                }\n            }\n        ]\n    };\n    //////////////////////////////////////////////////\n    AvroSchemas.transferInvite = {\n        "name": "chatTransferInviteRequest",\n        "type": "record",\n        "fields": [\n            { "name": "protocol", "type": "string" },\n            { "name": "transferRoomID", "type": "int" },\n            { "name": "transferMessage", "type": "string" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.transferInviteRes = {\n        "name": "chatTransferInviteResponse",\n        "type": "record",\n        "fields": [\n            { "name": "protocol", "type": "string" },\n            { "name": "transferAccepted", "type": "boolean" },\n            { "name": "transferRoomID", "type": "int" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.transferStart = {\n        "name": "chatTransferStart",\n        "type": "record",\n        "fields": [\n            { "name": "roomID", "type": "int" },\n            { "name": "protocol", "type": "string" },\n            { "name": "sessionID", "type": "string" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.chatTransferContinuation = {\n        "name": "chatTransferContinuation",\n        "type": "record",\n        "fields": [\n            { "name": "opID", "type": "string" },\n            { "name": "opName", "type": "string" },\n            { "name": "codDep", "type": "int" },\n            { "name": "roomID", "type": "int" },\n            { "name": "protocol", "type": "string" }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.tothSearchRequest = {\n        "name": "TothSearch",\n        "type": "record",\n        "fields": [\n            { "name": "key", "type": "string" },\n            { "name": "value", "type": "string" },\n            { "name": "timeout", "type": "int" },\n            { "name": "fields", "type": {\n                    "type": "array",\n                    "items": {\n                        "type": "record",\n                        "fields": [\n                            { "name": "field", "type": "string" },\n                            { "name": "required", "type": "boolean" }\n                        ]\n                    }\n                } }\n        ]\n    };\n    /////////////////////////////////////////////////////\n    AvroSchemas.tothSearchResponse = {\n        "name": "TothSearchResponse",\n        "type": "record",\n        "fields": [\n            { "name": "key", "type": "string" },\n            { "name": "value", "type": "string" },\n            { "name": "fieldsBoolean", "type": {\n                    "type": "array",\n                    "items": {\n                        "type": "record",\n                        "fields": [\n                            { "name": "field", "type": "string" },\n                            { "name": "value", "type": "boolean" }\n                        ]\n                    }\n                } },\n            {\n                "name": "fieldsLong",\n                "type": {\n                    "type": "array",\n                    "items": {\n                        "type": "record",\n                        "fields": [\n                            { "name": "field", "type": "string" },\n                            { "name": "value", "type": "long" }\n                        ]\n                    }\n                }\n            },\n            {\n                "name": "fieldsString",\n                "type": {\n                    "type": "array",\n                    "items": {\n                        "type": "record",\n                        "fields": [\n                            { "name": "field", "type": "string" },\n                            { "name": "value", "type": "string" }\n                        ]\n                    }\n                }\n            },\n            {\n                "name": "fieldsDouble",\n                "type": {\n                    "type": "array",\n                    "items": {\n                        "type": "record",\n                        "fields": [\n                            { "name": "field", "type": "string" },\n                            { "name": "value", "type": "double" }\n                        ]\n                    }\n                }\n            }\n        ]\n    };\n    return AvroSchemas;\n}());\nexports.AvroSchemas = AvroSchemas;\n\n\n//# sourceURL=webpack://Horus/./src/api/avro/avroSchemas.ts?')},"./src/api/classes/horus-core-class.ts":function(module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", { value: true });\nvar horus_wire_class_1 = __webpack_require__(/*! ./horus-wire-class */ "./src/api/classes/horus-wire-class.ts");\nvar horus_utils_class_1 = __webpack_require__(/*! ./horus-utils-class */ "./src/api/classes/horus-utils-class.ts");\nvar avroHelper_1 = __webpack_require__(/*! ../avro/avroHelper */ "./src/api/avro/avroHelper.ts");\nvar events_1 = __webpack_require__(/*! events */ "./node_modules/events/events.js");\nvar HorusCore = /** @class */ (function (_super) {\n    __extends(HorusCore, _super);\n    function HorusCore(mqttClient, wireID) {\n        var _this = _super.call(this) || this;\n        _this.avroHelper = avroHelper_1.AvroHelper;\n        _this.subscriptions = {};\n        _this.modules = [];\n        _this.mqttClient = mqttClient;\n        _this.shared = {\n            id: null,\n            channel: null,\n            room: null,\n            wireID: wireID.toString()\n        };\n        return _this;\n    }\n    HorusCore.prototype._wire = function (wire) {\n        return new horus_wire_class_1.Wire({\n            version: wire.version,\n            restriction: wire.restriction,\n            channel: wire.channel,\n            id: wire.id,\n            wireID: wire.wireID || this.shared.wireID,\n            service: wire.service,\n            operation: wire.operation,\n            broadcast: wire.broadcast,\n            direction: wire.direction\n        });\n    };\n    HorusCore.prototype._getCustomPushTopic = function (wire, broadcast) {\n        var pushTopic = "";\n        if (broadcast) {\n            if (broadcast.type == "channel") {\n                pushTopic = wire.getBroadcastChannelTopic();\n            }\n            else {\n                pushTopic = wire.getBroadcastPublicTopic();\n            }\n        }\n        else {\n            pushTopic = wire.getPushTopic();\n        }\n        return pushTopic;\n    };\n    HorusCore.prototype._publish = function (topic, data) {\n        data = (data.length) ? data : JSON.stringify(data);\n        this.mqttClient.publish(topic, data);\n        horus_utils_class_1.HorusUtils.log(">>> publish: " + topic);\n    };\n    HorusCore.prototype._subscribe = function (topic, service) {\n        var subscription = {\n            service: service.name,\n            operation: service.operation,\n            eventName: service.name + "-" + service.operation\n        };\n        this.subscriptions[topic] = subscription;\n        this.mqttClient.subscribe(topic);\n        horus_utils_class_1.HorusUtils.log("=== subscribe: " + topic);\n    };\n    HorusCore.prototype._unsubscribe = function (topic) {\n        delete this.subscriptions[topic];\n        this.mqttClient.unsubscribe(topic);\n        horus_utils_class_1.HorusUtils.log("--- unsubscribe: " + topic);\n    };\n    HorusCore.prototype._destination = function (subscription) {\n        var verify = (this.modules.indexOf(subscription.service) !== -1);\n        return verify ? subscription.service : subscription.eventName;\n    };\n    HorusCore.prototype._resolveTopic = function (topic) {\n        if (!this.subscriptions[topic]) {\n            var subs = Object.keys(this.subscriptions);\n            for (var i = 0; i < subs.length; i++) {\n                var combine = horus_wire_class_1.Wire.topicMatch(topic, subs[i]);\n                if (combine) {\n                    return subs[i];\n                }\n            }\n        }\n        return topic;\n    };\n    HorusCore.prototype.pullTo = function (service, operation, data) {\n        var wire = this._wire({ service: service, operation: operation });\n        var pullTopic = wire.getPullTopic();\n        this._publish(pullTopic, data);\n    };\n    HorusCore.prototype.customPullTo = function (wireElements, data) {\n        var wire = this._wire(wireElements);\n        var pullTopic = wire.getPullTopic();\n        this._publish(pullTopic, data);\n    };\n    HorusCore.prototype.initService = function (service, operation, broadcast) {\n        horus_utils_class_1.HorusUtils.log("    \\ninitialize service: " + service + "-" + operation);\n        var wire = this._wire({ service: service, operation: operation, broadcast: broadcast });\n        if (broadcast) {\n            if (broadcast.type == "channel") {\n                this._subscribe(wire.getBroadcastChannelTopic(), { name: service, operation: operation });\n            }\n            else {\n                this._subscribe(wire.getBroadcastPublicTopic(), { name: service, operation: operation });\n            }\n            return;\n        }\n        this._subscribe(wire.getPushTopic(), { name: service, operation: operation });\n        this._subscribe(wire.getBroadcastUserTopic(), { name: service, operation: operation });\n        this._subscribe(wire.getFailTopic(), { name: service, operation: operation + "-fail" });\n    };\n    HorusCore.prototype.customInitService = function (wireElements) {\n        horus_utils_class_1.HorusUtils.log("    \\ncustom initialize service: " + wireElements.service + "-" + wireElements.operation);\n        var wire = this._wire(wireElements);\n        var pushTopic = this._getCustomPushTopic(wire, wireElements.broadcast);\n        this._subscribe(pushTopic, { name: wireElements.service, operation: wireElements.operation });\n        this._subscribe(wire.getBroadcastUserTopic(), { name: wireElements.service, operation: wireElements.operation });\n        if (pushTopic.indexOf("push") !== -1 && !wireElements.broadcast) {\n            this._subscribe(wire.getFailTopic(), { name: wireElements.service, operation: wireElements.operation + "-fail" });\n        }\n    };\n    HorusCore.prototype.disableService = function (service, operation, broadcast) {\n        horus_utils_class_1.HorusUtils.log("    \\ndisable service: " + service + "-" + operation);\n        var wire = this._wire({ service: service, operation: operation, broadcast: broadcast });\n        if (broadcast) {\n            this._unsubscribe(wire.getBroadcastPublicTopic());\n            return;\n        }\n        this._unsubscribe(wire.getPushTopic());\n        this._unsubscribe(wire.getBroadcastUserTopic());\n        this._unsubscribe(wire.getFailTopic());\n    };\n    HorusCore.prototype.customDisableService = function (wireElements) {\n        horus_utils_class_1.HorusUtils.log("    \\ncustom disable service: " + wireElements.service + "-" + wireElements.operation);\n        var wire = this._wire(wireElements);\n        var pushTopic = this._getCustomPushTopic(wire, wireElements.broadcast);\n        this._unsubscribe(pushTopic);\n        if (pushTopic.indexOf("push") !== -1 && !wireElements.broadcast) {\n            this._unsubscribe(wire.getFailTopic());\n        }\n    };\n    HorusCore.prototype.resolveMessage = function (topic, message) {\n        horus_utils_class_1.HorusUtils.log("<<< received: " + topic);\n        var messageJson;\n        var version = topic.split("/")[2];\n        try {\n            messageJson = JSON.parse(message.toString());\n        }\n        catch (error) {\n            messageJson = message;\n        }\n        var data = {};\n        var subscriptionTopic = this._resolveTopic(topic);\n        if (this.subscriptions[subscriptionTopic] && this.subscriptions[subscriptionTopic].eventName) {\n            data.operation = this.subscriptions[subscriptionTopic].operation;\n            data.response = messageJson;\n            data.version = version;\n            var destination = this._destination(this.subscriptions[subscriptionTopic]);\n            horus_utils_class_1.HorusUtils.log("    Core event emiter: " + destination);\n            _super.prototype.emit.call(this, destination, data);\n        }\n    };\n    return HorusCore;\n}(events_1.EventEmitter));\nexports.HorusCore = HorusCore;\n\n\n//# sourceURL=webpack://Horus/./src/api/classes/horus-core-class.ts?')},"./src/api/classes/horus-utils-class.ts":function(module,exports,__webpack_require__){"use strict";eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar general_1 = __webpack_require__(/*! ../../../settings/general */ \"./settings/general.ts\");\nvar HorusUtils = /** @class */ (function () {\n    function HorusUtils() {\n    }\n    HorusUtils.randomInt = function (min, max) {\n        return Math.floor(Math.random() * (max + 1 - min)) + min;\n    };\n    HorusUtils.randomItemFromArray = function (array) {\n        var min = 0;\n        var max = array.length - 1;\n        var index = this.randomInt(min, max);\n        return array[index];\n    };\n    HorusUtils.randomValueFromObject = function (object) {\n        var values = Object.values(object);\n        var min = 0;\n        var max = values.length - 1;\n        var index = this.randomInt(min, max);\n        return values[index];\n    };\n    HorusUtils.generateRandomString = function (length) {\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n        var result = '';\n        for (var i = length; i > 0; --i) {\n            result += chars[Math.floor(Math.random() * chars.length)];\n        }\n        return result;\n    };\n    HorusUtils.apiException = function (message) {\n        return {\n            message: message,\n            name: \"HorusApiException\"\n        };\n    };\n    HorusUtils.moment = function () {\n        var date = new Date();\n        var hour = ('0' + date.getHours().toString()).slice(-2);\n        var minutes = ('0' + date.getMinutes().toString()).slice(-2);\n        var seconds = ('0' + date.getSeconds().toString()).slice(-2);\n        //let time = hour.padStart(2, '0')+':'+minutes.padStart(2, '0')+':'+seconds.padStart(2, '0');\n        var time = hour + ':' + minutes + ':' + seconds;\n        return time;\n    };\n    HorusUtils.log = function (text) {\n        if (general_1.default.debug) {\n            console.log(this.moment() + \" \" + text);\n        }\n    };\n    return HorusUtils;\n}());\nexports.HorusUtils = HorusUtils;\n\n\n//# sourceURL=webpack://Horus/./src/api/classes/horus-utils-class.ts?")},"./src/api/classes/horus-wire-class.ts":function(module,exports,__webpack_require__){"use strict";eval('\nObject.defineProperty(exports, "__esModule", { value: true });\nvar general_1 = __webpack_require__(/*! ../../../settings/general */ "./settings/general.ts");\nvar Wire = /** @class */ (function () {\n    function Wire(props) {\n        this.version = props.version || general_1.default.apiVersion;\n        this.restriction = props.restriction;\n        this.channel = props.channel || \'$channel\';\n        this.userID = props.id || \'$id\';\n        this.wireID = props.wireID;\n        this.microService = props.service;\n        this.operation = props.operation;\n        this.direction = props.direction;\n        if (!props.broadcast)\n            return;\n        this.subject = props.broadcast.subject;\n        this.subSubject = props.broadcast.subSubject;\n    }\n    Wire.topicMatch = function (topic, wildcard) {\n        return topicMatch(topic, wildcard);\n    };\n    Wire.prototype.getPullTopic = function () {\n        if (this.restriction == "internal") {\n            return this.getInternalTopic();\n        }\n        return getTopic({\n            version: this.version,\n            restriction: this.restriction || "external",\n            channel: this.channel,\n            userID: this.userID,\n            wireID: this.wireID,\n            microService: this.microService,\n            operation: this.operation,\n            direction: this.direction || \'pull\',\n            type: \'value\'\n        });\n    };\n    Wire.prototype.getPushTopic = function () {\n        if (this.restriction == "internal") {\n            return this.getInternalTopic(this.direction || "push");\n        }\n        return getTopic({\n            version: this.version,\n            restriction: this.restriction || "external",\n            channel: this.channel,\n            userID: this.userID,\n            wireID: this.wireID,\n            microService: this.microService,\n            operation: this.operation,\n            direction: this.direction || \'push\',\n            type: \'value\'\n        });\n    };\n    Wire.prototype.getFailTopic = function () {\n        if (this.restriction == "internal") {\n            return this.getInternalTopic("fail");\n        }\n        return getTopic({\n            version: this.version,\n            restriction: this.restriction || "external",\n            channel: this.channel,\n            userID: this.userID,\n            wireID: this.wireID,\n            microService: this.microService,\n            operation: this.operation,\n            direction: \'fail\',\n            type: \'value\'\n        });\n    };\n    Wire.prototype.getBroadcastUserTopic = function () {\n        return getTopic({\n            version: this.version,\n            restriction: this.restriction || "external",\n            channel: this.channel,\n            userID: this.userID,\n            wireID: \'broadcast\',\n            microService: this.microService,\n            operation: this.operation,\n            direction: this.direction || \'push\',\n            type: \'value\'\n        });\n    };\n    Wire.prototype.getBroadcastChannelTopic = function () {\n        return getBroadcastTopic({\n            version: this.version,\n            restriction: \'external\',\n            channel: this.channel,\n            microService: this.microService,\n            operation: this.operation,\n            subject: this.subject,\n            subSubject: this.subSubject\n        });\n    };\n    Wire.prototype.getBroadcastPublicTopic = function () {\n        return getBroadcastTopic({\n            version: this.version,\n            restriction: this.restriction || \'public\',\n            channel: \'broadcast\',\n            microService: this.microService,\n            operation: this.operation,\n            subject: this.subject,\n            subSubject: this.subSubject\n        });\n    };\n    Wire.prototype.getInternalTopic = function (direction) {\n        var dir = direction ? direction : this.direction ? this.direction : \'pull\';\n        return getInternalTopicFromTemplate({\n            version: this.version,\n            restriction: \'internal\',\n            userID: this.userID,\n            wireID: this.wireID,\n            microService: this.microService,\n            operation: this.operation,\n            direction: dir,\n            type: \'value\'\n        });\n    };\n    return Wire;\n}());\nexports.Wire = Wire;\n/*\n * Funções auxiliares\n */\nvar WIRE_TEMPLATE = "horus/api/{version}/{restriction}/{channel}/{userID}/{wireID}/{microService}/{operation}/{direction}/{type}";\nvar WIRE_INTERNAL_TEMPLATE = "horus/api/{version}/{restriction}/{userID}/{wireID}/{microService}/{operation}/{direction}/{type}";\nvar WIRE_BROADCAST_TEMPLATE = "horus/api/{version}/{restriction}/{channel}/broadcast/{microService}/{operation}/{subject}/{subSubject}/push/value";\nfunction getTopic(params) {\n    var topic = WIRE_TEMPLATE\n        .replace("{version}", params.version)\n        .replace("{restriction}", params.restriction)\n        .replace("{channel}", params.channel)\n        .replace("{userID}", params.userID)\n        .replace("{wireID}", params.wireID)\n        .replace("{microService}", params.microService)\n        .replace("{operation}", params.operation)\n        .replace("{direction}", params.direction)\n        .replace("{type}", params.type);\n    return topic;\n}\nfunction getInternalTopicFromTemplate(params) {\n    var topic = WIRE_INTERNAL_TEMPLATE\n        .replace("{version}", params.version)\n        .replace("{restriction}", params.restriction)\n        .replace("{userID}", params.userID)\n        .replace("{wireID}", params.wireID)\n        .replace("{microService}", params.microService)\n        .replace("{operation}", params.operation)\n        .replace("{direction}", params.direction)\n        .replace("{type}", params.type);\n    return topic;\n}\nfunction getBroadcastTopic(params) {\n    var topic = WIRE_BROADCAST_TEMPLATE\n        .replace("{version}", params.version)\n        .replace("{restriction}", params.restriction)\n        .replace("{channel}", params.channel)\n        .replace("{microService}", params.microService)\n        .replace("{operation}", params.operation)\n        .replace("{subject}", params.subject)\n        .replace("{subSubject}", params.subSubject);\n    return topic;\n}\nfunction topicMatch(topic, wildcard) {\n    if (topic === wildcard || wildcard === \'#\') {\n        return true;\n    }\n    var newTopic = "";\n    var t = String(topic).split(\'/\');\n    var w = String(wildcard).split(\'/\');\n    var i = 0;\n    for (var lt = t.length; i < lt; i++) {\n        if (w[i] === t[i] || w[i] === \'+\' || w[i] === \'$channel\' || w[i] === \'$id\') {\n            newTopic += t[i] + "/";\n        }\n        else if (w[i] === \'#\') {\n            newTopic += t.slice(i).join(\'/\');\n            return true;\n        }\n        else if (w[i] !== t[i]) {\n            return null;\n        }\n    }\n    newTopic = newTopic.slice(0, -1);\n    return (topic === newTopic) ? true : false;\n}\n\n\n//# sourceURL=webpack://Horus/./src/api/classes/horus-wire-class.ts?')},"./src/api/classes/services/horus-chat-class.ts":function(module,exports,__webpack_require__){"use strict";eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar horus_utils_class_1 = __webpack_require__(/*! ../horus-utils-class */ \"./src/api/classes/horus-utils-class.ts\");\nvar events_1 = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\nvar HorusChat = /** @class */ (function (_super) {\n    __extends(HorusChat, _super);\n    function HorusChat(core) {\n        var _this = _super.call(this) || this;\n        _this.core = core;\n        _this._serviceName = 'chat';\n        _this.chatInfo = {};\n        _this.core.modules.push(_this._serviceName);\n        _this._operations = _this._getOperations();\n        _this._initService();\n        return _this;\n    }\n    HorusChat.prototype._initService = function () {\n        var _this = this;\n        var ops = Object.keys(this._operations);\n        //initialize chat operations\n        ops.forEach(function (operation) {\n            _this.core.initService(_this._serviceName, operation);\n        });\n        this.core.customInitService({ service: this._serviceName, operation: 'clientHeartbeat', direction: 'pullAck' });\n        this.core.customInitService({ service: this._serviceName, operation: 'invite', version: 200 });\n        //listen chat events\n        this.core.on(this._serviceName, function (data) {\n            if (_this._operations[data.operation]) {\n                _this._operations[data.operation](_this, data);\n                return;\n            }\n            if (data.operation == \"clientHeartbeat\") {\n                _this.clientHeartbeatPullAck(_this);\n                return;\n            }\n            horus_utils_class_1.HorusUtils.log(\"    Chat event emiter: \" + data.operation);\n            _super.prototype.emit.call(_this, data.operation, data.response);\n        });\n    };\n    HorusChat.prototype._getOperations = function () {\n        return {\n            'serverHeartbeat': this.serverHeartbeatPush,\n            'chatAvailable': null,\n            'invite': this.chatInvitePush,\n            'inviteCancel': null,\n            'start': this.chatStartPush,\n            'message': this.messagePush,\n            'messageStatus': this.messageStatusPush,\n            'messageTypingStatus': this.messageTypingPush,\n            'history': this.historyPush,\n            'close': this.chatClosePush,\n            'transferInvite': this.transferInvitePush,\n            'transferStart': this.transferStartPush,\n            'transferContinuation': this.transferContinuationPush\n        };\n    };\n    HorusChat.prototype.disableOperation = function (operation) {\n        this.core.disableService(this._serviceName, operation);\n    };\n    HorusChat.prototype.disableService = function () {\n        var _this = this;\n        var ops = Object.keys(this._operations);\n        ops.forEach(function (operation) {\n            _this.core.disableService(_this._serviceName, operation);\n        });\n    };\n    HorusChat.prototype.chatContinue = function (data, cb) {\n        //TODO: validar data\n        this.chatInfo.protocol = data.protocol;\n        this.chatInfo.opID = data.opID;\n        this.core.shared.room = data.room;\n        var payload = {\n            opName: data.opName,\n            opID: data.opID,\n            room: data.room,\n            protocol: data.protocol,\n            ticket: data.ticket\n        };\n        if (!cb) {\n            this.emit(\"chatStart\", payload);\n            return;\n        }\n        cb(payload);\n    };\n    /*\n     * On receive data PUSH, interceptors\n     */\n    HorusChat.prototype.serverHeartbeatPush = function (instance) {\n        instance.core.customPullTo({ service: instance._serviceName, operation: 'serverHeartbeat', direction: \"pushAck\" }, {\n            protocol: instance.chatInfo.protocol\n        });\n    };\n    HorusChat.prototype.clientHeartbeatPullAck = function (instance) {\n        horus_utils_class_1.HorusUtils.log(\"    Chat clientHeartbeatPullAck: tudo ok\");\n        clearTimeout(instance.lastTimerPullArck);\n        instance.lastTimerPullArck = 0;\n    };\n    HorusChat.prototype.chatInvitePush = function (instance, data) {\n        horus_utils_class_1.HorusUtils.log(\"    Chat intercepted event emiter: chatInvite\");\n        if (data.version === \"200\") {\n            var msg = data.response;\n            instance.core.operators.changeRoom(msg.envelope.roomID);\n            instance.chatInfo = instance.clearPreventExtensible(instance.chatInfo, 'chatInfo');\n            instance.chatInfo.opID = msg.envelope.opID;\n            instance.chatInfo.opName = msg.envelope.opName;\n            instance.chatInfo.opCodDep = msg.envelope.opCodDep;\n            instance.chatInfo.opSID = msg.envelope.sessionID;\n            instance.chatInfo.opChannel = msg.envelope.channel;\n            instance.chatInfo.requestedAt = msg.envelope.requestedAt;\n            instance.emit(\"chatInvite2\", msg.envelope);\n        }\n        //envia monitoração para evitar futuras abordagens\n        instance.core.monitor.send({ name: \"invited\", value: new Date().getTime().toString() });\n    };\n    HorusChat.prototype.chatStartPush = function (instance, data) {\n        var msg = instance.core.avroHelper.decodeRes('chatStarted', data.response);\n        instance.chatInfo = instance.clearPreventExtensible(instance.chatInfo, 'chatInfo');\n        instance.chatInfo.protocol = msg.envelope.protocol;\n        instance.chatInfo.opID = msg.envelope.opID;\n        instance.core.operators.changeRoom(msg.envelope.roomID);\n        //criar timmer para enviar e receber pullAck\n        instance._createTimmerAck(instance);\n        instance.emit(\"chatStart\", {\n            opName: msg.envelope.opName,\n            opID: msg.envelope.opID,\n            room: instance.core.shared.room,\n            protocol: msg.envelope.protocol\n        });\n    };\n    HorusChat.prototype.messagePush = function (instance, data) {\n        var msg = instance.core.avroHelper.decodeRes('chatMessage', data.response);\n        if (msg.envelope.agent !== 'vis') {\n            instance.emit(\"message\", {\n                agent: msg.envelope.agent,\n                msgID: msg.envelope.msgID,\n                agentName: msg.envelope.agentName,\n                msgTxt: msg.envelope.msgTxt\n            });\n        }\n    };\n    HorusChat.prototype.messageStatusPush = function (instance, data) {\n        var msg = instance.core.avroHelper.decodeRes('statusChatMsg', data.response);\n        if (msg.envelope.agent == 'op') {\n            instance.emit(\"messageStatus\", {\n                msgID: msg.envelope.msgID,\n                status: msg.envelope.msgStatus\n            });\n        }\n    };\n    HorusChat.prototype.messageTypingPush = function (instance, data) {\n        var msg = instance.core.avroHelper.decodeRes('messageTyping', data.response);\n        instance.emit(\"messageTypingStatus\", msg.envelope.typing);\n    };\n    HorusChat.prototype.historyPush = function (instance, data) {\n        var msg = instance.core.avroHelper.decodeRes('chatHistoryResponse', data.response);\n        instance.emit(\"listMessages\", msg.envelope);\n    };\n    HorusChat.prototype.chatClosePush = function (instance, data) {\n        var msg = instance.core.avroHelper.decodeRes('chatClosed', data.response);\n        clearInterval(instance.chatInfo.timmerPullAck);\n        instance.chatInfo = {};\n        instance.emit(\"chatClose\", {\n            protocol: msg.envelope.protocol,\n            agent: msg.envelope.agent\n        });\n    };\n    HorusChat.prototype.transferInvitePush = function (instance, data) {\n        var msg = instance.core.avroHelper.decodeReq('transferInvite', data.response);\n        instance.chatInfo = instance.clearPreventExtensible(instance.chatInfo, 'chatInfo');\n        instance.chatInfo.transferTargetRoom = msg.envelope.transferRoomID;\n        instance.emit(\"chatTransfer\", {\n            message: msg.envelope.transferMessage\n        });\n    };\n    HorusChat.prototype.transferStartPush = function (instance, data) {\n        instance.emit(\"chatTransferStart\", {});\n    };\n    HorusChat.prototype.transferContinuationPush = function (instance, data) {\n        var msg = instance.core.avroHelper.decodeRes('chatTransferContinuation', data.response);\n        delete instance.chatInfo.transferTargetRoom;\n        instance.core.shared.room = msg.envelope.roomID;\n        instance.chatInfo.opID = msg.envelope.opID;\n        instance.emit(\"chatTransferContinue\", {\n            protocol: msg.envelope.protocol,\n            opName: msg.envelope.opName,\n            opID: msg.envelope.opID,\n            room: msg.envelope.roomID\n        });\n    };\n    /*\n     * To send data PULL\n     */\n    HorusChat.prototype.do = function (operation, data) {\n        if (operation && this[operation]) {\n            this[operation](data);\n            return;\n        }\n        _super.prototype.emit.call(this, \"error\", \"incorrect params\");\n    };\n    HorusChat.prototype.chatAvailable = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.roomID = (data.room) ? data.room : this.core.shared.room;\n        this.core.customPullTo({ service: \"operators\", operation: 'reactiveStateToRoom', version: 200 }, obj);\n    };\n    HorusChat.prototype.request = function () {\n        var obj = {};\n        obj.sessionID = this.core.shared.wireID;\n        obj.priority = 0;\n        obj.protocol = \"\";\n        obj.roomID = this.core.shared.room;\n        var msg = this.core.avroHelper.encodeReq('chatRequest', obj);\n        this.core.pullTo('reactiveBuffer', 'chatRequest', msg);\n        this.core.monitor.send({ name: \"invited\", value: new Date().getTime().toString() });\n        this.emit(\"chatRequest-sent\");\n    };\n    HorusChat.prototype.requestCancel = function () {\n        var obj = {};\n        this.core.pullTo('reactiveBuffer', 'removeClient', obj);\n    };\n    HorusChat.prototype.replyInvite = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.visitor = {};\n        obj.visitor.ID = this.core.shared.id;\n        obj.visitor.name = data.name || \"Não identificado\";\n        obj.visitor.codDep = data.codDep || 0;\n        obj.operator = {};\n        obj.operator.ID = this.chatInfo.opID;\n        obj.operator.name = this.chatInfo.opName;\n        obj.operator.codDep = this.chatInfo.opCodDep;\n        obj.agent = \"vis\";\n        obj.sessionID = this.chatInfo.opSID;\n        obj.roomID = this.core.shared.room;\n        obj.response = (data.accepted) ? 1 : 0;\n        obj.channel = this.chatInfo.opChannel;\n        obj.requestedAt = this.chatInfo.requestedAt;\n        var msg = this.core.avroHelper.encodeRes('chatResponse', obj);\n        this.core.pullTo(this._serviceName, 'response', msg);\n    };\n    HorusChat.prototype.message = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.protocol = this.chatInfo.protocol;\n        obj.agent = 'vis';\n        obj.agentID = this.core.shared.id;\n        obj.agentName = \"\";\n        obj.msgID = data.msgID;\n        obj.msgTxt = data.msgTxt;\n        var msg = this.core.avroHelper.encodeRes('chatMessage', obj);\n        this.core.pullTo(this._serviceName, 'message', msg);\n    };\n    HorusChat.prototype.messageStatus = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.protocol = this.chatInfo.protocol;\n        obj.agent = 'vis';\n        obj.msgID = data.msgID;\n        obj.msgStatus = parseInt(data.status);\n        var msg = this.core.avroHelper.encodeRes('statusChatMsg', obj);\n        this.core.pullTo(this._serviceName, 'messageStatus', msg);\n    };\n    HorusChat.prototype.messageTyping = function (status) {\n        var obj = {};\n        obj.protocol = this.chatInfo.protocol;\n        obj.agent = 'vis';\n        obj.sessionID = this.core.shared.wireID;\n        obj.typing = status;\n        var msg = this.core.avroHelper.encodeRes('messageTyping', obj);\n        this.core.pullTo(this._serviceName, 'messageTypingStatus', msg);\n    };\n    HorusChat.prototype.replyTransfer = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.protocol = this.chatInfo.protocol;\n        obj.transferRoomID = this.chatInfo.transferTargetRoom;\n        obj.transferAccepted = data.accepted;\n        var msg = this.core.avroHelper.encodeRes('transferInviteRes', obj);\n        this.core.pullTo(this._serviceName, 'transferInviteResponse', msg);\n    };\n    HorusChat.prototype.listMessages = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.protocol = data.protocol;\n        obj.agent = 'vis';\n        if (data.closed) {\n            obj.fsm = 'closed';\n        }\n        else {\n            obj.fsm = 'inprogress';\n        }\n        var msg = this.core.avroHelper.encodeReq('chatHistoryRequest', obj);\n        this.core.pullTo(this._serviceName, 'history', msg);\n    };\n    HorusChat.prototype.quit = function () {\n        //verifica se está em transferência\n        if (this.chatInfo.transferTargetRoom) {\n            this.requestCancel();\n            delete this.chatInfo.transferTargetRoom;\n        }\n        var obj = {};\n        obj.protocol = this.chatInfo.protocol;\n        obj.agent = 'vis';\n        var msg = this.core.avroHelper.encodeRes('chatClosed', obj);\n        this.core.pullTo(this._serviceName, 'close', msg);\n        clearInterval(this.chatInfo.timmerPullAck);\n        this.chatInfo = {};\n    };\n    /*\n     * Métodos auxiliares\n     */\n    HorusChat.prototype._createTimmerAck = function (instance) {\n        //publica heartbeat pull para que o serviço responda com pullAck\n        var timmerToPullAck = instance.core.shared.timmerToPullAck || 5000;\n        clearInterval(instance.chatInfo.timmerPullAck);\n        instance.chatInfo.timmerPullAck = setInterval(function () {\n            instance.core.pullTo(instance._serviceName, 'clientHeartbeat', {\n                protocol: instance.chatInfo.protocol\n            });\n            //criar timmer a cada heartbeat pull, deve ser cancelado a cada pullAck\n            instance.lastTimerPullArck = setTimeout(function () {\n                try {\n                    instance._sendErrorToClient(\"Falha na comunicação com serviço de chat.\");\n                }\n                catch (err) {\n                    horus_utils_class_1.HorusUtils.log(\"    Chat event emiter _sendErrorToClient ERROR: \" + err);\n                }\n            }, 3000);\n        }, timmerToPullAck);\n    };\n    //notifica mensagens de erro p/ implementação\n    HorusChat.prototype._sendErrorToClient = function (message) {\n        this.emit(\"error\", {\n            message: message\n        });\n    };\n    // clear object to avoid preventExtensible:\n    HorusChat.prototype.clearPreventExtensible = function (data, dataName) {\n        var _this = this;\n        var obj = data;\n        this[dataName] = {};\n        Object.keys(obj).forEach(function (item) {\n            _this[dataName][item] = obj[item]; // add previous itens to chatInfo;\n        });\n        return this[dataName];\n    };\n    return HorusChat;\n}(events_1.EventEmitter));\nexports.HorusChat = HorusChat;\n\n\n//# sourceURL=webpack://Horus/./src/api/classes/services/horus-chat-class.ts?")},"./src/api/classes/services/horus-chatBot-class.ts":function(module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", { value: true });\nvar events_1 = __webpack_require__(/*! events */ "./node_modules/events/events.js");\nvar HorusChatBot = /** @class */ (function (_super) {\n    __extends(HorusChatBot, _super);\n    function HorusChatBot(core) {\n        var _this = _super.call(this) || this;\n        _this.core = core;\n        _this._serviceName = \'chatBot\';\n        _this.core.modules.push(_this._serviceName);\n        _this._initService();\n        return _this;\n    }\n    HorusChatBot.prototype._initService = function () { };\n    /*\n     * To send data PULL\n     */\n    HorusChatBot.prototype.do = function (operation, data) {\n        if (operation && this[operation]) {\n            this[operation](data);\n            return;\n        }\n        _super.prototype.emit.call(this, "error", "incorrect params");\n    };\n    HorusChatBot.prototype.getCells = function (data) {\n        if (data === void 0) { data = {}; }\n        this.core.customPullTo({ restriction: "internal", service: "operators", operation: \'getCells\' }, {});\n    };\n    HorusChatBot.prototype.enterTheRoom = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.opID = data.opID || this.core.shared.id;\n        obj.roomID = data.roomID;\n        obj.opName = data.opName;\n        obj.reactive = true;\n        obj.type = "bot";\n        var msg = this.core.avroHelper.encodeReq(\'enterTheRoom\', obj);\n        this.core.customPullTo({ id: obj.opID, service: "operators", operation: \'addOperator\' }, msg);\n    };\n    HorusChatBot.prototype.exitTheRoom = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.opID = data.opID || this.core.shared.id;\n        obj.roomID = data.roomID;\n        var msg = this.core.avroHelper.encodeReq(\'exitTheRoom\', obj);\n        this.core.customPullTo({ id: obj.opID, service: "operators", operation: \'removeOperator\' }, msg);\n    };\n    HorusChatBot.prototype.changeReactive = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.opID = data.opID || this.core.shared.id;\n        obj.state = data.status ? 1 : 0;\n        obj.roomID = (data.roomID) ? data.roomID : this.core.shared.room;\n        var msg = this.core.avroHelper.encodeReq(\'changeState\', obj);\n        this.core.customPullTo({ id: obj.opID, service: "operators", operation: \'changeState\' }, msg);\n    };\n    HorusChatBot.prototype.nextClient = function (data) {\n        if (data === void 0) { data = {}; }\n        var msg = JSON.stringify({\n            meta: {\n                uuid: ""\n            },\n            header: {\n                apiKey: "", signature: "", nonce: 0\n            },\n            envelope: {\n                roomID: data.roomID\n            }\n        });\n        this.core.customPullTo({ id: data.opID, service: "reactiveBuffer", operation: "nextClient", version: "200" }, msg);\n    };\n    HorusChatBot.prototype.chatAvailable = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.roomID = (data.room) ? data.room : this.core.shared.room || 0;\n        var msg = this.core.avroHelper.encodeReq(\'chatReactiveReq\', obj);\n        this.core.customPullTo({ id: data.opID, service: "operators", operation: "reactiveStateToRoom" }, msg);\n    };\n    HorusChatBot.prototype.startChat = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.visitor = {};\n        obj.visitor.ID = data.visID;\n        obj.visitor.name = data.name || "Não identificado";\n        obj.visitor.codDep = data.codDep || 0;\n        obj.operator = {};\n        obj.operator.ID = data.opID;\n        obj.operator.name = data.opName;\n        obj.operator.codDep = data.opCodDep;\n        obj.agent = "op";\n        obj.sessionID = data.sessionID;\n        obj.roomID = data.roomID;\n        obj.response = 1;\n        obj.channel = data.channel;\n        obj.requestedAt = new Date().getTime();\n        var msg = this.core.avroHelper.encodeRes(\'chatResponse\', obj);\n        this.core.customPullTo({ id: data.opID, service: "chat", operation: "response" }, msg);\n    };\n    HorusChatBot.prototype.message = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.protocol = data.protocol;\n        obj.agent = \'op\';\n        obj.agentID = data.id;\n        obj.agentName = data.name;\n        obj.msgID = data.msgID.toString();\n        obj.msgTxt = data.msgTxt;\n        var msg = this.core.avroHelper.encodeRes(\'chatMessage\', obj);\n        this.core.customPullTo({ id: data.opID, service: "chat", operation: "message" }, msg);\n    };\n    HorusChatBot.prototype.messageStatus = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.protocol = data.protocol;\n        obj.agent = \'op\';\n        obj.msgID = data.msgID;\n        obj.msgStatus = parseInt(data.status);\n        var msg = this.core.avroHelper.encodeRes(\'statusChatMsg\', obj);\n        this.core.customPullTo({ id: data.opID, service: "chat", operation: "messageStatus" }, msg);\n    };\n    HorusChatBot.prototype.messageTyping = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.protocol = data.protocol;\n        obj.agent = \'op\';\n        obj.sessionID = data.sessionID;\n        obj.typing = data.status;\n        var msg = this.core.avroHelper.encodeRes(\'messageTyping\', obj);\n        this.core.customPullTo({ id: data.opID, service: "chat", operation: "messageTypingStatus" }, msg);\n    };\n    HorusChatBot.prototype.transferInvite = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.protocol = data.protocol;\n        obj.transferRoomID = data.room;\n        obj.transferMessage = data.message;\n        var msg = this.core.avroHelper.encodeReq(\'transferInvite\', obj);\n        this.core.customPullTo({ id: data.opID, service: "chat", operation: "transferInvite" }, msg);\n    };\n    HorusChatBot.prototype.userMonitor = function (data) {\n        var obj = {};\n        if (Array.isArray(data.monitor)) {\n            obj.fields = data.monitor;\n        }\n        else {\n            obj.fields = [];\n            obj.fields[0] = {};\n            obj.fields[0].name = data.monitor.name;\n            obj.fields[0].value = data.monitor.value;\n        }\n        this.core.customPullTo({ channel: data.client.channel, id: data.client.id, service: \'monitor\', operation: \'state\', version: 200 }, obj);\n    };\n    HorusChatBot.prototype.userIdentify = function (data) {\n        this.core.customPullTo({ restriction: "internal", service: "thoth", operation: \'association\' }, data);\n    };\n    return HorusChatBot;\n}(events_1.EventEmitter));\nexports.HorusChatBot = HorusChatBot;\n\n\n//# sourceURL=webpack://Horus/./src/api/classes/services/horus-chatBot-class.ts?')},"./src/api/classes/services/horus-fileAttacher-class.ts":function(module,exports,__webpack_require__){"use strict";eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar horus_utils_class_1 = __webpack_require__(/*! ../horus-utils-class */ \"./src/api/classes/horus-utils-class.ts\");\nvar events_1 = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\nvar HorusTalkFileAttacher = /** @class */ (function (_super) {\n    __extends(HorusTalkFileAttacher, _super);\n    function HorusTalkFileAttacher(core) {\n        var _this = _super.call(this) || this;\n        _this.core = core;\n        _this._serviceName = 'horusTalkFileAttacher';\n        _this._downloadControl = {};\n        _this._uploadControl = {};\n        _this._chatTicket = \"\";\n        _this._downloadOnDemand = true;\n        _this._uploadMaxPartSize = 4000;\n        _this.core.modules.push(_this._serviceName);\n        _this._operations = _this._getOperations();\n        _this._initService();\n        return _this;\n    }\n    HorusTalkFileAttacher.prototype._initService = function () {\n        var _this = this;\n        var ops = Object.keys(this._operations);\n        //initialize horusTalkFileAttacher operations\n        ops.forEach(function (operation) {\n            _this.core.customInitService({ service: _this._serviceName, operation: operation, version: 200 });\n        });\n        //listen horusTalkFileAttacher events\n        this.core.on(this._serviceName, function (data) {\n            if (_this._operations[data.operation]) {\n                horus_utils_class_1.HorusUtils.log(\"    \" + _this._serviceName + \" intercepted event emiter: \" + data.operation);\n                _this._operations[data.operation](_this, data);\n                return;\n            }\n            horus_utils_class_1.HorusUtils.log(\"    \" + _this._serviceName + \" event emiter: \" + data.operation);\n            _super.prototype.emit.call(_this, data.operation, data.response);\n        });\n    };\n    HorusTalkFileAttacher.prototype._getOperations = function () {\n        return {\n            'fileAttacherConfig': this.fileAttacherConfigPush,\n            'fileAvailable': this.fileAvailablePush,\n            'fileStatus': this.fileStatusPush,\n            'fileDownload': this.fileDownloadPush,\n            'sendFile': this.sendFilePush,\n            'fileUpload': this.fileUploadPush,\n            'fileValidation': this.fileValidationPush,\n            'fileCancel': this.fileCancelPush,\n            'fileList': this.fileListPush\n        };\n    };\n    HorusTalkFileAttacher.prototype._clearUploadControl = function () {\n        this._uploadControl = {\n            fileID: horus_utils_class_1.HorusUtils.generateRandomString(20),\n            partsQtd: null,\n            length: null,\n            sending: false,\n            partials: []\n        };\n    };\n    /*\n     * On receive data PUSH, interceptors\n     */\n    //recebe configurações\n    HorusTalkFileAttacher.prototype.fileAttacherConfigPush = function (instance, data) {\n        var msg = data.response.payload;\n        instance._downloadOnDemand = msg.onDemand;\n        instance._uploadMaxPartSize = msg.partSizeMax;\n        instance.emit(\"fileTypesToUpload\", msg.listMimeType);\n    };\n    //recebe um arquivo para download\n    HorusTalkFileAttacher.prototype.fileAvailablePush = function (instance, data) {\n        var msg = data.response.payload;\n        instance._chatTicket = msg.ticket;\n        if (msg.sender.id !== instance.core.shared.id) {\n            instance.emit(\"fileAvailable\", msg);\n        }\n    };\n    //recebe status de um arquivo enviado\n    HorusTalkFileAttacher.prototype.fileStatusPush = function (instance, data) {\n        var msg = data.response.payload;\n        instance.emit(\"fileStatus\", msg);\n    };\n    //ao receber partes do arquivo\n    HorusTalkFileAttacher.prototype.fileDownloadPush = function (instance, data) {\n        var msg = data.response.payload;\n        if (instance._downloadControl[msg.fileID]) {\n            var part = instance._downloadControl[msg.fileID].receiveds.find(function (part) { return part.id === msg.partNumber; });\n            if (part) {\n                part.received = true;\n                //verifica se ainda tem partes pendentes\n                var notReceiveds = instance._downloadControl[msg.fileID].receiveds.filter(function (part) { return part.received === false; });\n                instance.emit(\"fileDownloadProgress\", {\n                    fileID: msg.fileID,\n                    partNumber: msg.partNumber,\n                    content: msg.contentPart,\n                    progress: {\n                        percent: ((instance._downloadControl[msg.fileID].partCount - notReceiveds.length) / instance._downloadControl[msg.fileID].partCount) * 100\n                    }\n                });\n                if (notReceiveds.length > 0) {\n                    if (instance._downloadOnDemand) {\n                        instance._downloadFileParts({ fileID: msg.fileID, partNumber: notReceiveds[0].id });\n                    }\n                }\n                else {\n                    //tudo recebido, fim do download\n                    instance.emit(\"fileDownloaded\", {\n                        fileID: msg.fileID,\n                        name: instance._downloadControl[msg.fileID].name,\n                        mimeType: instance._downloadControl[msg.fileID].mimeType\n                    });\n                    delete instance._downloadControl[msg.fileID];\n                }\n            }\n        }\n    };\n    //ao receber confirmação para início do envio de arquivo\n    HorusTalkFileAttacher.prototype.sendFilePush = function (instance, data) {\n        var response = data.response.payload;\n        if (response.ticket === instance._chatTicket\n            && instance._uploadControl.fileID === response.senderFileID\n            && !instance._uploadControl.sending) {\n            //emite evento para a implementação\n            instance.emit(\"fileUploadResponse\", {\n                status: response.status,\n                message: response.message,\n                fileID: response.fileID,\n                name: instance._uploadControl.name,\n                mimeType: instance._uploadControl.mimeType\n            });\n            if (response.status === \"REFUSED\")\n                return;\n            instance._uploadControl.fileID = response.fileID;\n            //envia os pedaços\n            instance._uploadControl.sending = true;\n            instance._uploadControl.partials.forEach(function (elm, idx) {\n                setTimeout(function () {\n                    instance._uploadFileParts(elm.id, elm.part);\n                }, idx * 20);\n            });\n        }\n    };\n    //recebe confirmação do serviço para uma parte enviada\n    HorusTalkFileAttacher.prototype.fileUploadPush = function (instance, data) {\n        var response = data.response.payload;\n        var idx = instance._uploadControl.partials.findIndex(function (elm) { return elm.id === response.partNumber; });\n        if (idx > -1 && response.fileID === instance._uploadControl.fileID) {\n            instance._uploadControl.partials[idx].sended = true;\n            //retorna as partes ainda não enviadas\n            var notSended = instance._uploadControl.partials.filter(function (part) { return part.sended === false; });\n            //emite evento de progresso\n            var percent = ((instance._uploadControl.partsQtd - notSended.length) / instance._uploadControl.partsQtd) * 100;\n            instance.emit(\"fileUploadProgress\", { fileID: response.fileID, percent: percent });\n            //se todas as partes foram enviadas chama validação do serviço\n            if (notSended.length === 0) {\n                instance.fileValidation({ fileID: response.fileID });\n            }\n        }\n    };\n    //recebe resposta de validação do serviço para as partes enviadas\n    HorusTalkFileAttacher.prototype.fileValidationPush = function (instance, data) {\n        if (data.response.payload.missingParts.length > 0) {\n            //reenvio das partes faltantes\n            data.response.payload.missingParts.forEach(function (part, idx) {\n                var partToResend = instance._uploadControl.partials.find(function (partCtrl) { return part === partCtrl.id; });\n                partToResend.sended = false;\n                setTimeout(function () {\n                    instance._uploadFileParts(partToResend.id, partToResend.part);\n                }, idx * 20);\n            });\n        }\n        else {\n            instance.emit('fileUploaded', data.response.payload);\n            instance._clearUploadControl();\n        }\n    };\n    //resposta de cancelamento do arquivo sendo enviado\n    HorusTalkFileAttacher.prototype.fileCancelPush = function (instance, data) {\n        if (data.response.payload.status === 'CANCELED') {\n            instance._clearUploadControl();\n        }\n        instance.emit('fileUploadCancel', data.response.payload);\n    };\n    //recebe lista de arquivos\n    HorusTalkFileAttacher.prototype.fileListPush = function (instance, data) {\n        instance.emit('fileList', data.response.payload);\n    };\n    /*\n     * To send data PULL\n     */\n    HorusTalkFileAttacher.prototype.do = function (operation, data) {\n        if (operation && this[operation]) {\n            return this[operation](data);\n        }\n        _super.prototype.emit.call(this, \"error\", \"incorrect params\");\n    };\n    //recupera as configurações para uso em fileAttacher\n    HorusTalkFileAttacher.prototype.fileAttacherConfig = function () {\n        this.core.customPullTo({ service: this._serviceName, operation: 'fileAttacherConfig', version: 200 }, { payload: {} });\n    };\n    //envia status de uma arquivo\n    HorusTalkFileAttacher.prototype.sendFileStatus = function (data) {\n        var obj = {};\n        obj.payload = {};\n        obj.payload.ticket = this._chatTicket;\n        obj.payload.fileID = data.fileID;\n        obj.payload.status = data.status;\n        this.core.customPullTo({ service: this._serviceName, operation: 'fileStatus', version: 200 }, obj);\n    };\n    //recupera sessões de chat do usuário\n    HorusTalkFileAttacher.prototype.activeSessionsByProtocol = function (protocol) {\n        var obj = {};\n        obj.payload = {};\n        obj.payload.protocolNumber = protocol;\n        this.core.customPullTo({ service: 'horusTalkMediator', operation: 'activeSessionsByProtocol', version: 200 }, obj);\n    };\n    //aciona download da primeira parte\n    HorusTalkFileAttacher.prototype.startDownloadFile = function (data) {\n        if (!this._downloadControl[data.fileID]) {\n            this._downloadControl[data.fileID] = {};\n            this._downloadControl[data.fileID].fileID = data.fileID;\n            this._downloadControl[data.fileID].name = data.name;\n            this._downloadControl[data.fileID].mimeType = data.mimeType;\n            this._downloadControl[data.fileID].partCount = data.partCount;\n            this._downloadControl[data.fileID].receiveds = [];\n            this._chatTicket = data.ticket;\n            for (var index = 1; index <= data.partCount; index++) {\n                this._downloadControl[data.fileID].receiveds.push({\n                    id: index, received: false\n                });\n            }\n            //solicita a primeira parte\n            this._downloadFileParts({ fileID: data.fileID, partNumber: 1 });\n        }\n    };\n    //prepara dados para upload do arquivo\n    HorusTalkFileAttacher.prototype.startUploadFile = function (data) {\n        var _this = this;\n        //pode enviar apenas 1 por vez\n        if (!this._uploadControl.sending) {\n            this._clearUploadControl();\n            //quebra em partes\n            var content = data.fileContent.split(\"base64,\")[1];\n            var regex = new RegExp('.{1,' + this._uploadMaxPartSize + '}', 'g');\n            var slices = content.match(regex);\n            //atualiza controle\n            this._chatTicket = data.ticket;\n            this._uploadControl.name = data.name;\n            this._uploadControl.mimeType = data.mimeType;\n            this._uploadControl.partsQtd = slices.length;\n            this._uploadControl.length = content.length;\n            this._uploadControl.size = data.size;\n            //TODO: talvez this._uploadControl.partials = slices e usar um map\n            slices.forEach(function (slice, idx) {\n                _this._uploadControl.partials.push({ id: idx + 1, part: slice, sended: false });\n            });\n            this._sendFileInfoToUpload();\n        }\n        else {\n            this.emit(\"fileUploadResponse\", {\n                status: \"REFUSED\",\n                message: \"Você já está enviando um arquivo, logo após você poderá enviar outro.\"\n            });\n        }\n    };\n    HorusTalkFileAttacher.prototype.fileValidation = function (data) {\n        var obj = {};\n        obj.payload = {};\n        obj.payload.ticket = this._chatTicket;\n        obj.payload.fileID = data.fileID;\n        this.core.customPullTo({ service: this._serviceName, operation: 'fileValidation', version: 200 }, obj);\n    };\n    //envia pedido para cancelar o upload de um arquivo\n    HorusTalkFileAttacher.prototype.cancelUploadFile = function (data) {\n        var obj = {};\n        obj.payload = {};\n        obj.payload.ticket = this._chatTicket;\n        obj.payload.fileID = data.fileID;\n        this.core.customPullTo({ service: this._serviceName, operation: 'fileCancel', version: 200 }, obj);\n    };\n    //recupera os arquivos da conversa\n    HorusTalkFileAttacher.prototype.fileList = function (data) {\n        var obj = {};\n        obj.payload = {};\n        obj.payload.ticket = data.ticket || this._chatTicket;\n        obj.payload.protocol = \"\";\n        this.core.customPullTo({ service: this._serviceName, operation: 'fileList', version: 200 }, obj);\n    };\n    /*\n     * Auxiliar functions\n     */\n    //solicita download de partes do arquivo\n    HorusTalkFileAttacher.prototype._downloadFileParts = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.payload = {};\n        obj.payload.ticket = this._chatTicket;\n        obj.payload.fileID = data.fileID;\n        obj.payload.partNumber = data.partNumber;\n        this.core.customPullTo({ service: this._serviceName, operation: 'fileDownload', version: 200 }, obj);\n    };\n    //faz upload de partes do arquivo\n    HorusTalkFileAttacher.prototype._uploadFileParts = function (partNumber, contentPart) {\n        if (this._uploadControl.sending) {\n            var obj = {};\n            obj.payload = {};\n            obj.payload.ticket = this._chatTicket;\n            obj.payload.fileID = this._uploadControl.fileID;\n            obj.payload.mimeType = this._uploadControl.mimeType;\n            obj.payload.partNumber = partNumber;\n            obj.payload.content = contentPart;\n            this.core.customPullTo({ service: this._serviceName, operation: 'fileUpload', version: 200 }, obj);\n        }\n    };\n    //comunica o serviço sobre o arquivo a ser enviado\n    HorusTalkFileAttacher.prototype._sendFileInfoToUpload = function () {\n        var obj = {};\n        obj.payload = {};\n        obj.payload.ticket = this._chatTicket;\n        obj.payload.hash = \"\";\n        obj.payload.name = this._uploadControl.name;\n        obj.payload.mimeType = this._uploadControl.mimeType;\n        obj.payload.senderFileID = this._uploadControl.fileID,\n            obj.payload.senderTimestamp = new Date().getTime();\n        obj.payload.partCount = this._uploadControl.partsQtd;\n        obj.payload.length = this._uploadControl.length;\n        obj.payload.size = this._uploadControl.size;\n        this.core.customPullTo({ service: \"horusTalkMediator\", operation: 'sendFile', version: 200 }, obj);\n    };\n    return HorusTalkFileAttacher;\n}(events_1.EventEmitter));\nexports.HorusTalkFileAttacher = HorusTalkFileAttacher;\n\n\n//# sourceURL=webpack://Horus/./src/api/classes/services/horus-fileAttacher-class.ts?")},"./src/api/classes/services/horus-interactions-class.ts":function(module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", { value: true });\nvar horus_utils_class_1 = __webpack_require__(/*! ../horus-utils-class */ "./src/api/classes/horus-utils-class.ts");\nvar events_1 = __webpack_require__(/*! events */ "./node_modules/events/events.js");\nvar HorusInteractions = /** @class */ (function (_super) {\n    __extends(HorusInteractions, _super);\n    function HorusInteractions(core) {\n        var _this = _super.call(this) || this;\n        _this.core = core;\n        _this._serviceName = \'horusDigitalMarketing\';\n        _this.core.modules.push(_this._serviceName);\n        _this._operations = _this._getOperations();\n        _this._initService();\n        return _this;\n    }\n    HorusInteractions.prototype._initService = function () {\n        var _this = this;\n        var ops = Object.keys(this._operations);\n        //initialize push operations\n        ops.forEach(function (operation) {\n            // this.core.initService(this._serviceName, operation);\n            _this.core.customInitService({ version: "200", service: _this._serviceName, operation: operation });\n        });\n        //listen events\n        this.core.on(this._serviceName, function (data) {\n            if (_this._operations[data.operation]) {\n                _this._operations[data.operation](_this, data);\n                return;\n            }\n            horus_utils_class_1.HorusUtils.log("    Interactions event emiter: " + data.operation);\n            _super.prototype.emit.call(_this, data.operation, data.response);\n        });\n    };\n    HorusInteractions.prototype._getOperations = function () {\n        return {\n            \'sendBanner\': this.sendBannerPush,\n            \'sendVideo\': this.sendVideoPush,\n            \'sendToast\': this.sendToastPush\n        };\n    };\n    /*\n     * On receive data PUSH, interceptors\n     */\n    HorusInteractions.prototype.sendBannerPush = function (instance, data) {\n        var msg = data.response.payload;\n        //envia o primeiro status de recebido\n        instance.interactionStatus({ id: msg.contentStatusID, status: "received" });\n        instance.emit("receiveBanner", msg);\n    };\n    HorusInteractions.prototype.sendVideoPush = function (instance, data) {\n        var msg = data.response.payload;\n        //envia o primeiro status de recebido\n        instance.interactionStatus({ id: msg.contentStatusID, status: "received" });\n        instance.emit("receiveVideo", msg);\n    };\n    HorusInteractions.prototype.sendToastPush = function (instance, data) {\n        var msg = data.response.payload;\n        //envia o primeiro status de recebido\n        instance.interactionStatus({ id: msg.contentStatusID, status: "received" });\n        instance.emit("receiveToast", msg);\n    };\n    /*\n     * To send data PULL\n     */\n    HorusInteractions.prototype.do = function (operation, data) {\n        if (operation && this[operation]) {\n            this[operation](data);\n            return;\n        }\n        _super.prototype.emit.call(this, "error", "incorrect params");\n    };\n    HorusInteractions.prototype.interactionStatus = function (data) {\n        if (data === void 0) { data = {}; }\n        var obj = {};\n        obj.payload = {};\n        obj.payload.contentStatusID = data.id;\n        obj.payload.status = data.status;\n        this.core.customPullTo({\n            version: "200",\n            service: this._serviceName,\n            operation: \'updateContentStatus\'\n        }, obj);\n    };\n    return HorusInteractions;\n}(events_1.EventEmitter));\nexports.HorusInteractions = HorusInteractions;\n\n\n//# sourceURL=webpack://Horus/./src/api/classes/services/horus-interactions-class.ts?')},"./src/api/classes/services/horus-monitor-class.ts":function(module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", { value: true });\nvar horus_utils_class_1 = __webpack_require__(/*! ../horus-utils-class */ "./src/api/classes/horus-utils-class.ts");\nvar events_1 = __webpack_require__(/*! events */ "./node_modules/events/events.js");\nvar HorusMonitor = /** @class */ (function (_super) {\n    __extends(HorusMonitor, _super);\n    function HorusMonitor(core) {\n        var _this = _super.call(this) || this;\n        _this.core = core;\n        _this._serviceName = \'monitor\';\n        _this.core.modules.push(_this._serviceName);\n        _this.operations = _this._getOperations();\n        _this._initService();\n        return _this;\n    }\n    HorusMonitor.prototype._initService = function () {\n        var _this = this;\n        var ops = Object.keys(this.operations);\n        //initialize operations\n        ops.forEach(function (operation) {\n            _this.core.initService(_this._serviceName, operation);\n        });\n        //listen events\n        this.core.on(this._serviceName, function (data) {\n            if (_this.operations[data.operation]) {\n                _this.operations[data.operation](_this, data);\n                return;\n            }\n            horus_utils_class_1.HorusUtils.log("    Monitor event emiter: " + data.operation);\n            _super.prototype.emit.call(_this, data.operation, data.response);\n        });\n    };\n    HorusMonitor.prototype._getOperations = function () {\n        return {\n            \'extractor\': this.extractorPush\n        };\n    };\n    /*\n     * On receive data PUSH, interceptors\n     */\n    HorusMonitor.prototype.extractorPush = function (instance, data) {\n        var msg = instance.core.avroHelper.decodeRes(\'elementsToMonitRes\', data.response);\n        instance.emit("response", msg.envelope);\n    };\n    /*\n     * To send data PULL\n     */\n    HorusMonitor.prototype.do = function (operation, data) {\n        if (operation && this[operation]) {\n            this[operation](data);\n            return;\n        }\n        _super.prototype.emit.call(this, "error", "incorrect params");\n    };\n    HorusMonitor.prototype.request = function (data) {\n        var obj = {};\n        obj.visID = this.core.shared.id;\n        obj.channel = this.core.shared.channel;\n        obj.origin = data.origin;\n        var msg = this.core.avroHelper.encodeReq(\'elementsToMonit\', obj);\n        this.core.pullTo(this._serviceName, \'extractor\', msg);\n    };\n    HorusMonitor.prototype.send = function (data) {\n        var obj = {};\n        if (Array.isArray(data)) {\n            obj.fields = data;\n        }\n        else {\n            obj.fields = [];\n            obj.fields[0] = {};\n            obj.fields[0].name = data.name;\n            obj.fields[0].value = data.value;\n        }\n        this.core.customPullTo({ service: this._serviceName, operation: \'state\', version: 200 }, obj);\n    };\n    return HorusMonitor;\n}(events_1.EventEmitter));\nexports.HorusMonitor = HorusMonitor;\n\n\n//# sourceURL=webpack://Horus/./src/api/classes/services/horus-monitor-class.ts?')},"./src/api/classes/services/horus-operators-class.ts":function(module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", { value: true });\nvar horus_utils_class_1 = __webpack_require__(/*! ../horus-utils-class */ "./src/api/classes/horus-utils-class.ts");\nvar events_1 = __webpack_require__(/*! events */ "./node_modules/events/events.js");\nvar HorusOperators = /** @class */ (function (_super) {\n    __extends(HorusOperators, _super);\n    function HorusOperators(core) {\n        var _this = _super.call(this) || this;\n        _this.core = core;\n        _this._serviceName = \'operators\';\n        _this.core.modules.push(_this._serviceName);\n        _this.operations = _this._getOperations();\n        _this._initService();\n        return _this;\n    }\n    HorusOperators.prototype._initService = function () {\n        var _this = this;\n        var ops = Object.keys(this.operations);\n        //not broadcast\n        this.core.initService(this._serviceName, "reactiveStateToRoom");\n        //new version\n        this.core.customInitService({ service: this._serviceName, operation: \'reactiveStateToRoom\', version: 200 });\n        //listen to events\n        this.core.on(this._serviceName, function (data) {\n            if (_this.operations[data.operation]) {\n                _this.operations[data.operation].interceptor(_this, data);\n                return;\n            }\n            horus_utils_class_1.HorusUtils.log("    Operators event emiter: " + data.operation);\n            _super.prototype.emit.call(_this, data.operation, data.response);\n        });\n    };\n    HorusOperators.prototype._getOperations = function () {\n        return {\n            \'reactiveStateToRoom\': { broadcast: { subject: null, subSubject: "all" }, interceptor: this.reactiveToRoom }\n        };\n    };\n    HorusOperators.prototype.changeRoom = function (roomID) {\n        if (this.core.shared.room !== roomID) {\n            //faz unsubscribe de broadcast da sala anterior\n            this.core.customDisableService({\n                service: this._serviceName,\n                operation: \'reactiveStateToRoom\',\n                broadcast: this.operations["reactiveStateToRoom"].broadcast,\n                version: "200"\n            });\n            //seta nº da nova sala no objeto compartilhado\n            this.core.shared.room = roomID;\n            if (this.core.shared.web) {\n                sessionStorage.setItem("HorusRoomID", roomID.toString());\n            }\n            //const formatedRoom = (\'00\' + roomID).slice(-3);\n            var formatedRoom = \'00\' + roomID;\n            this.operations["reactiveStateToRoom"].broadcast.subject = formatedRoom;\n            //subscreve broadcast\n            this.core.customInitService({\n                service: this._serviceName,\n                operation: \'reactiveStateToRoom\',\n                broadcast: this.operations["reactiveStateToRoom"].broadcast,\n                version: "200"\n            });\n        }\n    };\n    /*\n     * On receive data PUSH, interceptors\n     */\n    HorusOperators.prototype.reactiveToRoom = function (instance, data) {\n        if (data.version === "200") {\n            instance.core.emit("chat", { operation: "chatAvailable2", response: data.response });\n        }\n    };\n    return HorusOperators;\n}(events_1.EventEmitter));\nexports.HorusOperators = HorusOperators;\n\n\n//# sourceURL=webpack://Horus/./src/api/classes/services/horus-operators-class.ts?')},"./src/api/classes/services/horus-room-class.ts":function(module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", { value: true });\nvar horus_utils_class_1 = __webpack_require__(/*! ../horus-utils-class */ "./src/api/classes/horus-utils-class.ts");\nvar events_1 = __webpack_require__(/*! events */ "./node_modules/events/events.js");\nvar HorusRoom = /** @class */ (function (_super) {\n    __extends(HorusRoom, _super);\n    function HorusRoom(core) {\n        var _this = _super.call(this) || this;\n        _this.core = core;\n        _this._serviceName = \'room\';\n        _this.core.modules.push(_this._serviceName);\n        _this.operations = _this._getOperations();\n        _this._initService();\n        return _this;\n    }\n    HorusRoom.prototype._initService = function () {\n        var _this = this;\n        var ops = Object.keys(this.operations);\n        //initialize operations\n        ops.forEach(function (operation) {\n            _this.core.customInitService({ service: _this._serviceName, operation: operation, version: 200 });\n        });\n        //listen events\n        this.core.on(this._serviceName, function (data) {\n            if (_this.operations[data.operation]) {\n                _this.operations[data.operation](_this, data);\n                return;\n            }\n            horus_utils_class_1.HorusUtils.log("    Room event emiter: " + data.operation);\n            _super.prototype.emit.call(_this, data.operation, data.response);\n        });\n    };\n    HorusRoom.prototype._getOperations = function () {\n        return {\n            \'receptionist\': this.receptionistPush\n        };\n    };\n    /*\n     * On receive data PUSH, interceptors\n     */\n    HorusRoom.prototype.receptionistPush = function (instance, data) {\n        var msg = data.response;\n        //troca de sala\n        instance.core.operators.changeRoom(msg.roomID);\n        //trata se for sala 0\n        if (msg.roomID == 0) {\n            instance.core.emit(\'chat\', {\n                operation: "chatAvailable2",\n                response: { available: false }\n            });\n            return;\n        }\n        instance.core.customPullTo({ service: "operators", operation: \'reactiveStateToRoom\', version: "200" }, { roomID: msg.roomID });\n    };\n    return HorusRoom;\n}(events_1.EventEmitter));\nexports.HorusRoom = HorusRoom;\n\n\n//# sourceURL=webpack://Horus/./src/api/classes/services/horus-room-class.ts?')},"./src/api/classes/services/horus-thoth-class.ts":function(module,exports,__webpack_require__){"use strict";eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar horus_utils_class_1 = __webpack_require__(/*! ../horus-utils-class */ \"./src/api/classes/horus-utils-class.ts\");\nvar events_1 = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\nvar HorusThoth = /** @class */ (function (_super) {\n    __extends(HorusThoth, _super);\n    function HorusThoth(core) {\n        var _this = _super.call(this) || this;\n        _this.core = core;\n        _this._serviceName = 'thoth';\n        _this.core.modules.push(_this._serviceName);\n        _this.operations = _this._getOperations();\n        _this._initService();\n        return _this;\n    }\n    HorusThoth.prototype._initService = function () {\n        var _this = this;\n        var ops = Object.keys(this.operations);\n        //initialize operations\n        ops.forEach(function (operation) {\n            _this.core.initService(_this._serviceName, operation);\n        });\n        //listen events\n        this.core.on(this._serviceName, function (data) {\n            if (_this.operations[data.operation]) {\n                _this.operations[data.operation](_this, data);\n                return;\n            }\n            horus_utils_class_1.HorusUtils.log(\"    Room event emiter: \" + data.operation);\n            _super.prototype.emit.call(_this, data.operation, data.response);\n        });\n    };\n    HorusThoth.prototype._getOperations = function () {\n        return {\n            'searchUser': this.searchUserPush\n        };\n    };\n    /*\n     * On receive data PUSH, interceptors\n     */\n    HorusThoth.prototype.searchUserPush = function (instance, data) {\n        var msg = instance.core.avroHelper.decodeRes('tothSearchResponse', data.response);\n        instance.emit('searchUser', msg.envelope);\n    };\n    /*\n     * To send data PULL\n     */\n    HorusThoth.prototype.do = function (operation, data) {\n        if (operation && this[operation]) {\n            this[operation](data);\n            return;\n        }\n        _super.prototype.emit.call(this, \"error\", \"incorrect params\");\n    };\n    HorusThoth.prototype.searchUser = function (data) {\n        var obj = {};\n        obj.key = data.key;\n        obj.value = data.value;\n        obj.timeout = 1000;\n        obj.fields = [];\n        data.fields.forEach(function (field) {\n            obj.fields.push({ field: field, required: false });\n        });\n        var msg = this.core.avroHelper.encodeReq('tothSearchRequest', obj);\n        this.core.pullTo(this._serviceName, 'searchUser', msg);\n    };\n    return HorusThoth;\n}(events_1.EventEmitter));\nexports.HorusThoth = HorusThoth;\n\n\n//# sourceURL=webpack://Horus/./src/api/classes/services/horus-thoth-class.ts?")},"./src/api/main.ts":function(module,exports,__webpack_require__){"use strict";eval('\nvar horus_core_class_1 = __webpack_require__(/*! ./classes/horus-core-class */ "./src/api/classes/horus-core-class.ts");\nvar horus_wire_class_1 = __webpack_require__(/*! ./classes/horus-wire-class */ "./src/api/classes/horus-wire-class.ts");\nvar horus_utils_class_1 = __webpack_require__(/*! ./classes/horus-utils-class */ "./src/api/classes/horus-utils-class.ts");\nvar horus_room_class_1 = __webpack_require__(/*! ./classes/services/horus-room-class */ "./src/api/classes/services/horus-room-class.ts");\nvar horus_monitor_class_1 = __webpack_require__(/*! ./classes/services/horus-monitor-class */ "./src/api/classes/services/horus-monitor-class.ts");\nvar horus_chat_class_1 = __webpack_require__(/*! ./classes/services/horus-chat-class */ "./src/api/classes/services/horus-chat-class.ts");\nvar horus_fileAttacher_class_1 = __webpack_require__(/*! ./classes/services/horus-fileAttacher-class */ "./src/api/classes/services/horus-fileAttacher-class.ts");\nvar horus_chatBot_class_1 = __webpack_require__(/*! ./classes/services/horus-chatBot-class */ "./src/api/classes/services/horus-chatBot-class.ts");\nvar horus_operators_class_1 = __webpack_require__(/*! ./classes/services/horus-operators-class */ "./src/api/classes/services/horus-operators-class.ts");\nvar horus_thoth_class_1 = __webpack_require__(/*! ./classes/services/horus-thoth-class */ "./src/api/classes/services/horus-thoth-class.ts");\nvar horus_interactions_class_1 = __webpack_require__(/*! ./classes/services/horus-interactions-class */ "./src/api/classes/services/horus-interactions-class.ts");\nvar general_1 = __webpack_require__(/*! ../../settings/general */ "./settings/general.ts");\nvar connection_1 = __webpack_require__(/*! ../../settings/connection */ "./settings/connection.ts");\nvar mqtt = __webpack_require__(/*! mqtt */ "mqtt");\nfunction Main(objOptions) {\n    var username = objOptions.username, token = objOptions.token, environment = objOptions.environment, disable = objOptions.disable, debug = objOptions.debug, wireID = objOptions.wireID;\n    var wire_id = (wireID) ? wireID : horus_utils_class_1.HorusUtils.randomInt(1000000000, 99999999999999);\n    var topic_last_will = new horus_wire_class_1.Wire({ wireID: wire_id, service: "userStatus", operation: "disconnect" }).getPullTopic();\n    var env = getEnvironment(environment);\n    var hasAlreadyConnected = false;\n    general_1.default.debug = (typeof debug != "undefined") ? debug : general_1.default.debug;\n    general_1.default.connectDesconnectMsg.envelope.wireID = wire_id.toString();\n    connection_1.default.connectOptions.username = username;\n    connection_1.default.connectOptions.password = token;\n    connection_1.default.connectOptions.will = {\n        topic: topic_last_will,\n        payload: JSON.stringify(general_1.default.connectDesconnectMsg)\n    };\n    var mqttClient = mqtt.connect(env.protocol + \'://\' + env.host + \':\' + env.port, connection_1.default.connectOptions);\n    //cria instância de horus core\n    var horusCore = new horus_core_class_1.HorusCore(mqttClient, wire_id);\n    //ao estabelecer conexão mqtt\n    mqttClient.on(\'connect\', function () {\n        if (!hasAlreadyConnected) {\n            console.log("horus connected at " + (environment || \'prod\'));\n            internals();\n            hasAlreadyConnected = true;\n        }\n    });\n    //erro na conexão mqtt\n    mqttClient.on(\'error\', function () {\n        console.log("mqtt connection error");\n        horusCore.emit(\'connection-error\', {});\n    });\n    mqttClient.on(\'close\', function (err) {\n        console.log("mqtt connection close", err);\n    });\n    //recebe mensagem mqtt\n    mqttClient.on(\'message\', function (topic, message) { return horusCore.resolveMessage(topic, message); });\n    //trata coisas internas da API\n    function internals() {\n        //recebe credenciais\n        horusCore.once(\'userStatus-getCredentials\', function (data) {\n            horusCore.shared.id = data.response.envelope.id;\n            horusCore.shared.channel = data.response.envelope.channel;\n            if (general_1.default.mock)\n                horusCore.pullTo("mock", "identify", horusCore.shared);\n            //cria instâncias\n            if (!disable || disable.indexOf("chat") == -1) {\n                new horus_room_class_1.HorusRoom(horusCore);\n                horusCore.operators = new horus_operators_class_1.HorusOperators(horusCore);\n                horusCore.chat = new horus_chat_class_1.HorusChat(horusCore);\n                horusCore.fileAttacher = new horus_fileAttacher_class_1.HorusTalkFileAttacher(horusCore);\n                ifWeb();\n            }\n            if (!disable || disable.indexOf("monitor") == -1)\n                horusCore.monitor = new horus_monitor_class_1.HorusMonitor(horusCore);\n            if (!disable || disable.indexOf("integration") == -1)\n                horusCore.integration = new horus_thoth_class_1.HorusThoth(horusCore);\n            if (!disable || disable.indexOf("chatBot") == -1)\n                horusCore.chatBot = new horus_chatBot_class_1.HorusChatBot(horusCore);\n            if (!disable || disable.indexOf("interactions") == -1)\n                horusCore.interactions = new horus_interactions_class_1.HorusInteractions(horusCore);\n            horusCore.emit(\'connect\', horusCore.shared.wireID);\n        });\n        horusCore.pullTo(\'userStatus\', \'connect\', general_1.default.connectDesconnectMsg);\n        //pede credenciais\n        horusCore.initService(\'userStatus\', \'getCredentials\');\n        horusCore.pullTo(\'userStatus\', \'getCredentials\', {});\n    }\n    //recupera o servidor de conexão\n    function getEnvironment(environment) {\n        if (environment) {\n            if (typeof environment == "object") {\n                return {\n                    protocol: environment.protocol || "ws",\n                    host: environment.host,\n                    port: environment.port\n                };\n            }\n            else if (environment.indexOf(\'des\') >= 0 || environment.indexOf(\'dev\') >= 0) {\n                return connection_1.default.enviroments.dev;\n            }\n            else if (environment.indexOf(\'hom\') >= 0 || environment.indexOf(\'hm\') >= 0) {\n                return connection_1.default.enviroments.hm;\n            }\n            else if (environment == "internal_prod") {\n                return connection_1.default.enviroments.internal_prod;\n            }\n        }\n        return connection_1.default.enviroments.prod;\n    }\n    //verifica e trata coisas se for ambiente web\n    function ifWeb() {\n        if (typeof sessionStorage !== "undefined") {\n            horusCore.shared.web = true;\n            if (sessionStorage.getItem("HorusRoomID")) {\n                var room = parseInt(sessionStorage.getItem("HorusRoomID"));\n                if (room != 0) {\n                    horusCore.operators.changeRoom(room);\n                    horusCore.chat.chatAvailable({ room: room });\n                }\n            }\n        }\n    }\n    return horusCore;\n}\nmodule.exports = (function (objOptions) {\n    if (arguments.length > 0 && (typeof arguments[0] === "object"))\n        return Main(objOptions);\n    throw new TypeError(\'Erro na inicialização, parâmetros incorretos\');\n});\n\n\n//# sourceURL=webpack://Horus/./src/api/main.ts?')},avsc:function(module,exports){eval("module.exports = avro;\n\n//# sourceURL=webpack://Horus/external_%22avro%22?")},mqtt:function(module,exports){eval("module.exports = mqtt;\n\n//# sourceURL=webpack://Horus/external_%22mqtt%22?")}});function horusChatControl(o){var e=document.getElementById("nomePersonalizado"),t=e?e.innerText:"Cliente",n="Atendimento Virtual",s="Um funcionário do Banco do Brasil está disponível para falar com você.",r=!1,a=!1,i=!1,c=1,l=[],p="",d={},u=[],h=[],m=!1,v=!1,_=null,f=new chatUI({assets:"https://www100.bb.com.br/assets"});function g(){m&&v&&(h.sort(function(e,t){return parseInt(e.timestamp)-parseInt(t.timestamp)}),h.forEach(function(e){var t,n;e.fileID?(t=e).sender.id===o.shared.id?(V(t),J(t.fileID,100),f.chatFileUploadInfo(t.fileID,"enviado")):N(t):(n=e,f.chatMessage(n),"vis"==n.agent?f.setStatusMessage(n.msgID,n.msgStatus):1==n.msgStatus&&o.chat.do("messageStatus",{msgID:n.msgID,status:3}))}))}function b(e,t){!a||i?f.chatRequestClose():f.chatRequest("body",{action:y,title:e||n,text:t||s})}function y(){if(r||i)return I(),void(a||f.chatRequestClose());o.chat.on("chatRequest-sent",w),o.chat.on("chatRequest-fail",x),r=!0,o.chat.do("request")}function I(){o.chat.removeListener("chatStart",T),o.chat.removeListener("chatRequest-sent",w),o.chat.removeListener("chatRequest-fail",x),r=!1,o.chat.do("requestCancel")}function w(){o.chat.once("chatStart",T)}function x(){}function T(e){var n;i=!0,r&&I(),f.chatBox("body",e.protocol,{chatClose:C,chatMessage:j,selectFile:k}),f.getStatusTyping(function(e){o.chat.do("messageTyping",e)},1e3),_=e,sessionStorage.setItem("HorusChatInfo",JSON.stringify(_)),n=e.protocol,o.customInitService({service:"horusTalkMediator",operation:"activeSessionsByProtocol",version:200}),o.on("horusTalkMediator-activeSessionsByProtocol",function(e){var t=e.response.payload.activeSessions.find(function(e){return e.protocolNumber===parseInt(n)});t&&(f.showUploadFileIcon(),p=t.ticket,_.ticket=p,o.fileAttacher.do("fileAttacherConfig"),sessionStorage.setItem("HorusChatInfo",JSON.stringify(_)))}),o.fileAttacher.do("activeSessionsByProtocol",parseInt(n)),o.chat.on("messageTypingStatus",A),o.chat.on("message",H),o.chat.on("messageStatus",E),o.chat.on("chatTransfer",L),o.chat.on("chatTransferStart",O),o.chat.once("chatClose",U),o.chat.once("chatQuit",U),o.fileAttacher.on("fileAvailable",P),o.fileAttacher.on("fileStatus",M),o.fileAttacher.on("fileDownloadProgress",B),o.fileAttacher.on("fileDownloaded",F),o.fileAttacher.on("fileTypesToUpload",z),o.fileAttacher.on("fileUploadResponse",W),o.fileAttacher.on("fileUploadProgress",Y),o.fileAttacher.on("fileUploaded",K),o.fileAttacher.on("fileUploadCancel",G)}function C(){f.chatBoxConfirm("Quer mesmo encerrar o chat?",{action_text_1:"Sim",action_text_2:"Não",action_1:S,action_2:D})}function S(){f.chatBoxClose(),U(),o.chat.do("quit"),o.chat.do("chatAvailable",{version:"200"})}function D(){f.chatBoxAlertClose()}function j(){var e=f.chatGetMessage();if(e){var t="vis_"+c++;sessionStorage.setItem("myMessageCount",c),o.chat.do("message",{msgID:t,msgTxt:e}),f.chatMessage({msgID:t,msgTxt:e,agent:"vis"}),"undefined"!=typeof $&&$.refazerSessao&&$.refazerSessao()}}function k(e){o.fileAttacher.do("startUploadFile",{ticket:p,fileContent:e.content,name:e.name,mimeType:e.mimeType,size:e.size})}function H(e){Q(e.msgID),f.chatMessage(e),"undefined"!=typeof $&&$.refazerSessao&&$.refazerSessao()}function E(e){f.setStatusMessage(e.msgID,e.status)}function A(e){f.showOperatorIsTyping(e)}function L(e){f.chatBoxConfirmTransfer(e.message,{transferOk:function(){o.chat.once("chatReplyTransfer-fail",q),o.chat.do("replyTransfer",{accepted:!0}),f.chatBoxAlertClose()},transferRefused:function(){o.chat.do("replyTransfer",{accepted:!1}),f.chatBoxAlertClose()}})}function O(){o.chat.once("chatTransferContinue",R),f.chatBoxDisable("Em transferência...",!0)}function R(e){sessionStorage.setItem("HorusChatInfo",JSON.stringify(e)),f.chatBoxDisable("Em atendimento...",!1)}function q(e){f.chatBoxDisable("Falha ao transferir...",!1)}function U(e){i=!1,o.chat.removeListener("message",H),o.chat.removeListener("messageStatus",E),o.chat.removeListener("messageTypingStatus",A),o.chat.removeListener("chatTransfer",L),o.chat.removeListener("chatTransferStart",O),o.fileAttacher.removeListener("fileAvailable",P),o.fileAttacher.removeListener("fileStatus",M),o.fileAttacher.removeListener("fileDownloadProgress",B),o.fileAttacher.removeListener("fileDownloaded",F),o.fileAttacher.removeListener("fileTypesToUpload",z),o.fileAttacher.removeListener("fileUploadResponse",W),o.fileAttacher.removeListener("fileUploadProgress",Y),o.fileAttacher.removeListener("fileUploaded",K),o.fileAttacher.removeListener("fileUploadCancel",G),f.chatBoxAlert("Chat encerrado.",{action_text:"Fechar",action:function(){f.chatBoxClose(),o.chat.do("chatAvailable",{version:"200"})}}),sessionStorage.removeItem("HorusChatInfo"),sessionStorage.removeItem("myMessageCount")}function P(e){N(e),u.push(e.fileID),X(e.fileID,"RECEIVED")}function N(e){if(e.name){d[e.fileID]={data:e,fileParts:[]};var t=60<e.name.length?e.name.substring(0,57)+"...":e.name;f.chatFile({msgID:e.fileID,fileName:t,senderTimestamp:e.senderTimestamp,msgTxt:e.name.match(/\.[0-9a-z]+$/i)[0].toUpperCase(),action:function(){o.fileAttacher.do("startDownloadFile",d[e.fileID].data)}})}}function M(e){u.indexOf(e.fileID)}function B(e){d[e.fileID].fileParts[e.partNumber]=e.content,f.chatFileProgress({msgID:e.fileID,percent:e.progress.percent+"%"})}function F(e){var t=d[e.fileID].fileParts.join(""),n=e.name,o=e.mimeType;d[e.fileID].fileParts=[];for(var s=window.atob(t),r=s.length,a=new Uint8Array(r),i=0;i<r;i++)a[i]=s.charCodeAt(i);var c=new Blob([a.buffer],{type:o}),l=new File([c],n),p=document.createElement("a");document.body.appendChild(p),p.style="display: none";var u=window.URL.createObjectURL(l);p.href=u,p.download=n,p.click(),X(e.fileID,"READ")}function z(e){e}function W(e){"REFUSED"!==e.status?V(e):f.chatBoxAlert(e.message,{action_text:"Ok",action:function(){return f.chatBoxAlertClose()}})}function V(e){var t=60<e.name.length?e.name.substring(0,57)+"...":e.name;f.chatFile({msgID:e.fileID,fileName:t,msgTxt:e.name.match(/\.[0-9a-z]+$/i)[0].toUpperCase(),action:function(){o.fileAttacher.do("cancelUploadFile",{fileID:e.fileID})}},"vis")}function Y(e){J(e.fileID,e.percent+"%")}function J(e,t){f.chatFileProgress({msgID:e,percent:t+"%"})}function K(e){var t="";"VALID"!==e.status?t="Falha na validação do arquivo enviado, tente novamente.":(t="O arquivo foi enviado com sucesso.",f.chatFileUploadInfo(e.fileID,"enviado")),f.chatBoxAlert(t,{action_text:"Ok",action:function(){return f.chatBoxAlertClose()}})}function G(e){"CANCELED"===e.status&&(f.chatBoxAlert("O envio do arquivo foi cancelado.",{action_text:"Ok",action:function(){return f.chatBoxAlertClose()}}),f.chatFileUploadInfo(e.fileID,"cancelado"))}function Q(e){var t=2;!0===o.screenFocus?t=3:l.push(e),o.chat.do("messageStatus",{msgID:e,status:t})}function X(e,t){o.fileAttacher.do("sendFileStatus",{fileID:e,status:t})}return o.chat.on("error",function(e){}),sessionStorage.getItem("HorusChatInfo")&&(c=sessionStorage.getItem("myMessageCount"),_=JSON.parse(sessionStorage.getItem("HorusChatInfo")),o.chat.chatContinue(_,T),o.chat.on("listMessages",function(e){m=!0,e.messages.forEach(function(e){h.push(e)}),g()}),o.chat.do("listMessages",{protocol:_.protocol}),_.ticket&&(o.fileAttacher.on("fileList",function(e){v=!0,e.fileList.forEach(function(e){e.timestamp=e.senderTimestamp,h.push(e)}),g()}),o.fileAttacher.do("fileList",{ticket:_.ticket}))),o.chat.on("chatInvite2",function(e){f.chatRequestClose(),f.chatInvite("body",{chatAccept:function(){r||o.chat.once("chatStart",T);o.chat.do("replyInvite",{accepted:!0,name:t}),f.chatInviteClose()},chatRefuse:function(){o.chat.do("replyInvite",{accepted:!1}),f.chatInviteClose(),b()},title:e.title||n,text:e.messageInvite||s})}),o.chat.on("inviteCancel",function(){f.chatInviteClose(),b()}),o.chat.on("chatAvailable2",function(e){a=e.available,horusConfig.elChatStart&&(document.getElementById(horusConfig.elChatStart).style.display=a?"block":"none",horusConfig.hideHorusInvite)||r||b(e.title,e.text)}),{readMessages:function(){if(i){for(var e=0,t=l.length;e<t;e++)Q(l[e]);l=[]}},chatRequest:y}}function horusInteractionsControl(n){var r=[],a=!1,i=!1,c=new interactionsUI({assets:"https://www100.bb.com.br/assets"});function l(e,t){n.interactions.do("interactionStatus",{id:e,status:t})}function o(e){a=!0,r=[];var t='<div style="padding:10px">\n                            <p>Clique para ampliar:</p>\n                            <a href="#bb" class="openModalBanner_'.concat(e.contentID,'">\n                                <img src="').concat(e.imageUrl,'" style="max-width:100%;">\n                            </a>\n                        </div>');c.addInteractionContainer("body",{id:e.contentStatusID,title:e.title||"Oferta para você.",content:t,onClose:function(){return l(e.contentStatusID,"closed")}}),document.querySelector(".openModalBanner_"+e.contentID).addEventListener("click",function(){return function(e){c.interactionClose();var t='<a href="'.concat(e.actionUrl,'" target="_blank">\n            <img src="').concat(e.imageUrl,'" style="max-width:100%;">\n        </a>');c.createModal(t,{onClose:function(){l(e.contentStatusID,"closed")},onTimed:function(){l(e.contentStatusID,"ignored")},onClicked:function(){l(e.contentStatusID,"clicked")}},{time:e.exibitionTime}),l(e.contentStatusID,"seen")}(e)})}function s(t){if(a=!0,r=[],c.addInteractionContainer("body",{id:t.contentStatusID,title:t.title||"Oferta para você.",content:'<div style="padding:10px; height:90%"><div id="player"></div></div>',onClose:function(){return l(t.contentStatusID,"closed")}}),i)s();else{var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n),window.onYouTubeIframeAPIReady=function(){s()},i=!0}function o(e){e.data==YT.PlayerState.PLAYING?l(t.contentStatusID,"partially_watched"):e.data==YT.PlayerState.ENDED&&l(t.contentStatusID,"watched")}function s(){new YT.Player("player",{height:"210px",width:"100%",videoId:t.videoUrl,playerVars:{autoplay:t.autoplay?1:0,showinfo:0,controls:1,rel:0},events:{onStateChange:o}})}}function p(e){a=!0,r=[],l(e.contentStatusID,"seen");var t=e.buttonA&&e.buttonA.visible?'<a href="'.concat(e.buttonA.action,'" target="_blank" class="interaction-button-a">').concat(e.buttonA.label,"</a>"):"",n=e.buttonB&&e.buttonB.visible?'<a href="'.concat(e.buttonB.action,'" target="_blank" class="interaction-button-b">').concat(e.buttonB.label,"</a>"):"",o='<div style="padding:10px; height:90%">  '.concat(e.text,' </div>\n                        <div class="actions">');o+=t,o+=n,o+="</div>",c.addInteractionContainer("body",{id:e.contentStatusID,title:e.title||"Oferta para você.",content:o,exibitionTime:e.exibitionTime,onClose:function(){return l(e.contentStatusID,"closed")},onTimed:function(){return l(e.contentStatusID,"ignored")},onClicked:function(){return l(e.contentStatusID,"clicked")}})}return n.interactions.on("receiveBanner",function(e){n.screenFocus&&!a?o(e):r.push({id:e.contentID,type:"banner",response:e})}),n.interactions.on("receiveVideo",function(e){n.screenFocus&&!a?s(e):r.push({id:e.contentID,type:"video",response:e})}),n.interactions.on("receiveToast",function(e){n.screenFocus&&!a?p(e):r.push({id:e.contentID,type:"toast",response:e})}),{runInteractions:function(){r.forEach(function(e,t){setTimeout(function(){!function(e,t){switch(e){case"banner":o(t);break;case"video":s(t);break;case"toast":p(t)}}(e.type,e.response)},500*t)})}}}var horusConfig={environment:null,useBridge:!1,startChatFromChannel:function(e,t){var n=document.getElementById(e);n&&(this.elChatStart=e,this.hideHorusInvite=t,n.style.display="none")}};function horusMonitorControl(horus){horus.monitor.do("request",{origin:window.location.origin+window.location.pathname}),horus.monitor.on("response",elementsToMonit);var fieldsValues={};function elementsToMonit(e){e.elms.forEach(function(e){try{var t=document.querySelectorAll(e.ElmSelector),n={elementName:e.ElmID,elementSelector:e.ElmSelector,eventType:e.ElmEventName,eventValue:e.ElmEventValue,dataType:e.ElmDataType,eventTime:e.ElmTimerInterval};if("interval"===e.ElmEventName||"timeOut"===e.ElmEventName)bindElement(null,n);else for(var o=0;o<t.length;++o)bindElement(t[o],n)}catch(e){}})}function bindElement(e,t){var n=t.eventTime||3e3;switch(t.eventType){case"interval":setTimeout(function(){return boundFunction(e,t)},500),setInterval(function(){return boundFunction(e,t)},n);break;case"timeOut":setTimeout(function(){return boundFunction(e,t)},n);break;default:e.addEventListener(t.eventType,function(){return boundFunction(e,t)})}}function boundFunction(element,props){var value;if(element=element||document.querySelectorAll(props.elementSelector)[0],element){switch(props.dataType){case"value":value=element.value;break;case"attr":value=element.getAttribute(props.eventValue);break;case"innerText":value=element.innerText;break;case"innerHtml":value=element.innerHTML;break;case"fixedValue":value=props.eventValue;break;case"eval":value=eval(props.eventValue)}!fieldsValues[props.elementName]&&value?(fieldsValues[props.elementName]={},sendMonitored(props.elementName,value)):fieldsValues[props.elementName]&&fieldsValues[props.elementName].val!==value&&sendMonitored(props.elementName,value)}}function sendMonitored(e,t){fieldsValues[e].val=t,horus.monitor.do("send",{name:e,value:t})}}function horusOhtersControl(e){var t="Não identificado";-1!=navigator.appVersion.indexOf("Win")&&(t="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(t="MacOS"),-1!=navigator.appVersion.indexOf("Linux")&&(t="Linux");var n,o,s,r=navigator.userAgent,a=navigator.appName,i=""+parseFloat(navigator.appVersion),c=screen.height,l=screen.width;-1!=(o=r.indexOf("Edge"))?(a="Edge",i=r.substring(o+6),-1!=(o=r.indexOf("Version"))&&(i=r.substring(o+8))):-1!=(o=r.indexOf("MSIE"))?(a="Microsoft Internet Explorer",i=r.substring(o+5)):-1!=(o=r.indexOf("Chrome"))?(a="Chrome",i=r.substring(o+7)):-1!=(o=r.indexOf("Safari"))?(a="Safari",i=r.substring(o+7),-1!=(o=r.indexOf("Version"))&&(i=r.substring(o+8))):-1!=(o=r.indexOf("Firefox"))?(a="Firefox",i=r.substring(o+8)):(n=r.lastIndexOf(" ")+1)<(o=r.lastIndexOf("/"))&&(a=r.substring(n,o),i=r.substring(o+1),a.toLowerCase()==a.toUpperCase()&&(a=navigator.appName)),-1!=(s=i.indexOf(";"))&&(i=i.substring(0,s)),-1!=(s=i.indexOf(" "))&&(i=i.substring(0,s));var p=[{name:"URL",value:window.location.origin+window.location.pathname},{name:"OSName",value:t},{name:"OSVersion",value:"".toString()},{name:"browserName",value:a},{name:"browserVersion",value:i.toString()},{name:"screenWidth",value:l.toString()},{name:"screenHeight",value:c.toString()},{name:"codigoErro",value:""},{name:"textoErroPj",value:""},{name:"texto2ErroApj",value:""},{name:"saldo",value:""},{name:"valorAplicacao",value:""},{name:"saldoDisponivel",value:""},{name:"channel",value:e.shared.channel}];e.monitor.do("send",p)}window.dispatchEvent(new CustomEvent("horusScriptLoaded",{})),function(){var o=1,r=!1;!function n(){return setTimeout(function(){return o<=5&&("undefined"!=typeof _tokenHorus&&_tokenHorus[0]&&_tokenHorus[0].u?(e=_tokenHorus[0].u,t=_tokenHorus[0].p,(s=new Horus({username:e.toString(),token:t,environment:horusConfig.environment||(localStorage.getItem("horus_server")?{host:localStorage.getItem("horus_server"),port:localStorage.getItem("horus_port")}:-1===window.location.host.indexOf(".hm.bb.com.br")?-1===window.location.host.indexOf(".desenv.bb.com.br")&&"172.17.170.117:8080"!==window.location.host&&-1===window.location.href.indexOf("teste")?"prod":"dev":"hm"),disable:["integration","chatBot"],debug:sessionStorage.getItem("HorusDebug")||!1,wireID:sessionStorage.getItem("HorusWireID")})).on("connect",function(e){if(sessionStorage.setItem("HorusWireID",e),s.screenFocus=!0,!r){horusMonitorControl(s),horusOhtersControl(s);var t=horusInteractionsControl(s),n=horusChatControl(s);horusConfig.elChatStart&&document.getElementById(horusConfig.elChatStart).addEventListener("click",function(){n.chatRequest()}),horusConfig.useBridge&&(s.initService("horus","messageToChannel"),s.on("horus-messageToChannel",function(e){horusConfig.eventBridge=new CustomEvent("horusMessageToChannel",{detail:e.response}),window.dispatchEvent(horusConfig.eventBridge)})),window.addEventListener("focus",function(){s.screenFocus=!0,n.readMessages(),t.runInteractions(),s.monitor.do("send",{name:"screenFocus",value:"true"})},!0),window.addEventListener("blur",function(){s.screenFocus=!1,s.monitor.do("send",{name:"screenFocus",value:"false"})},!0),r=!0,(o=document.querySelector(".botoesBarraSuperior .sair"))&&o.addEventListener("click",function(){return sessionStorage.removeItem("HorusChatInfo")},!1)}var o}),!1):(o++,void n()));var e,t,s},1e3)}()}();